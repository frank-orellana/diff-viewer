diff --git a/SSE/WEB-INF/web.xml b/SSE/WEB-INF/web.xml
index 146b339e..023baf92 100644
--- a/SSE/WEB-INF/web.xml
+++ b/SSE/WEB-INF/web.xml
@@ -73,7 +73,7 @@
     <filter-class>com.meta4.filters.i18n.M4RequestEncodingFilter</filter-class>
     <init-param>
       <param-name>enable</param-name>
-      <param-value>false</param-value>
+      <param-value>true</param-value>
     </init-param>
   </filter>
   <filter>
@@ -293,6 +293,22 @@
     <servlet-name>SessionVerifier</servlet-name>
     <servlet-class>com.meta4.tcservlets.SessionVerifier</servlet-class>
   </servlet>
+  <servlet>
+    <servlet-name>Kaptcha</servlet-name>
+    <servlet-class>com.google.code.kaptcha.servlet.KaptchaServlet</servlet-class>
+    <init-param>
+      <param-name>kaptcha.border</param-name>
+      <param-value>no</param-value>
+    </init-param>
+    <init-param>
+      <param-name>kaptcha.textproducer.font.color</param-name>
+      <param-value>black</param-value>
+    </init-param>
+    <init-param>
+      <param-name>kaptcha.textproducer.char.space</param-name>
+      <param-value>5</param-value>
+    </init-param>
+  </servlet>
   <servlet-mapping>
     <servlet-name>CheckSecurity</servlet-name>
     <url-pattern>/servlet/CheckSecurity/*</url-pattern>
@@ -365,6 +381,10 @@
     <servlet-name>SessionVerifier</servlet-name>
     <url-pattern>/servlet/SessionVerifier</url-pattern>
   </servlet-mapping>
+  <servlet-mapping>
+    <servlet-name>Kaptcha</servlet-name>
+    <url-pattern>/images/kaptcha.jpg</url-pattern>
+  </servlet-mapping>
   <session-config>
     <tracking-mode>COOKIE</tracking-mode>
   </session-config>
diff --git a/SSE/m4custom/CCL/css/ccl_estilo_sse.css b/SSE/m4custom/CCL/css/ccl_estilo_sse.css
new file mode 100644
index 00000000..0e978668
--- /dev/null
+++ b/SSE/m4custom/CCL/css/ccl_estilo_sse.css
@@ -0,0 +1,33 @@
+div.scoPageHeader div {
+	float: left;
+}
+
+div.scoPageHeader div.fill {
+	width: 100%;
+}
+
+div.scoMenuLeft ul {
+	padding-left: 6px;
+	padding-inline-start: 6px;
+}
+
+div.scoMenuLeft div.content_1 li{
+	text-indent:0;
+}
+
+div.scoMenuLeft p.title{
+	margin: 18px 0 0 6px;
+	float:left;
+}
+
+div.scoMenuLeft div.withSubMenu{
+	width: 100%;
+}
+
+li.withSubMenu div{
+	float:left;
+}
+
+div.divright {
+	float:left;
+}
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/css/style_subportal.css b/SSE/m4custom/CCL/css/style_subportal.css
new file mode 100644
index 00000000..d097b929
--- /dev/null
+++ b/SSE/m4custom/CCL/css/style_subportal.css
@@ -0,0 +1,414 @@
+A:link
+{
+    BORDER-RIGHT: #395a82;
+    BORDER-TOP: #395a82;
+    BORDER-LEFT: #395a82;
+    COLOR: #15314c;
+    BORDER-BOTTOM: #395a82;
+    BACKGROUND-COLOR: transparent;
+    TEXT-DECORATION: none
+}
+A:visited
+{
+    COLOR: #15314c;
+    BACKGROUND-COLOR: transparent;
+    TEXT-DECORATION: none
+}
+A:active
+{
+    COLOR: #b1d202;
+    BACKGROUND-COLOR: transparent;
+    TEXT-DECORATION: none
+}
+A:hover
+{
+    COLOR: #2fa2f2;
+    BACKGROUND-COLOR: transparent;
+    TEXT-DECORATION: none
+}
+
+.bodyportal {
+  font-size: 11px;
+  font-family: Verdana, Arial, sans-serif;
+  color: #15314c;
+}
+
+.bodyportal table {
+  width:100%;
+}
+
+.bodyportal table td {
+  width:100%;
+}
+
+.bodyportal .tdmenuright {
+  width:210px;
+  vertical-align:top;
+}
+
+.portaltitle {
+  width: 100%;
+}
+
+.portaltitle .divleft {
+  float: left; 
+  width: 79%;
+}
+
+.portaltitle .divleft .title {
+  padding: 0 0 0 10px;
+  display: block; 
+  font-size: 13px; 
+  color: #fff;
+  height: 20px; 
+  background-image: url(/iconos/back_title_task.png);
+}
+
+.portaltitle .divleft .description {
+  margin: 20px 0 0 15px; 
+  display: block; 
+}
+
+.portaltitle .divright {
+  width: 21%;
+}
+
+.portaltitle .divright .image {
+  float: right; 
+  margin: 0 30px 0 0;
+}
+
+.portaltitle .divright img {
+  width: 100px;
+  height: 100px;
+}
+
+.subportal {
+  width: 100%; 
+  margin:0 0 10px 0;
+}
+
+.subportal .title {
+  padding: 5px 0 0 5px; 
+  font-size: 13px; 
+  width: 350px;
+  height: 25px;
+  color: #fff; 
+  display: block; 
+  background-image: url(/iconos/back_subtitle.png); 
+  background-repeat: no-repeat;
+}
+
+.subportal .box {
+  width: 98%; 
+  display: block; 
+  background-image: url(/iconos/back_vertical.png); 
+  background-repeat: repeat-x; 
+  border-bottom: 1px solid #e1e1e1;
+}
+
+.subportal .box .description {
+  margin: 10px 0 0 20px; 
+  display: block; 
+}
+
+.subportal .box .list {
+  margin: 10px 0 0 40px;
+}
+
+.subportal .box .list .image {
+  float: left; 
+  width: 75px; 
+  height: 75px; 
+  background-repeat: no-repeat;
+}
+
+.subportal .box .list .image IMG {
+  max-width: 75px; 
+  max-height: 75px; 
+}
+
+.subportal .box .list .boxlist {
+  margin: 0 0 5px 80px;
+} 
+
+.subportal .box .list .unsortedlist {
+  list-style-image:url(/iconos/img_list.png);
+}
+
+.menuright {
+  width: 210px;
+  float: right;
+  font-size: 10px;
+  font-family: Verdana, Arial, sans-serif;
+  color: #15314c;
+}
+
+.hrdocs {
+  background-color: #f1f2f5;
+}
+
+.hrdocs .hrdoctitle {
+  font-size: 13px; 
+  color: #fff;
+}
+
+.hrdocs .hrnavcont {
+  background-color: #f1f2f5;
+  width: 100%;
+  height: 18px;
+}
+
+.hrdocs .hrnav {
+  display:block; 
+  float:right;
+  margin: 3px 0;
+}
+
+.hrdocs .hrnav span {
+   padding: 0 3px 0 3px; 
+   margin: 0 3px 0 3px;
+}
+
+.hrdocs .hrnav .hand {
+  cursor: pointer;
+}
+
+.hrdocs .hrnav .default {
+  cursor: default;
+}
+
+.hrdocs .hrnav .enabled {
+  color: #ffffff;
+  background-color: #b1b1b1;
+}
+
+.hrdocs .hrnav .disabled {
+  color: #c1c1c1;
+  background-color: #ffffff;
+}
+
+.hrdocs .hrnav .spanfocus {
+  color: #15314c;
+  background-color: #ffffff;
+}
+
+.hrdocs .hrnav .spannofocus {
+  color: #ffffff;
+  background-color: #b1b1b1;
+}
+
+.hrdocs .hrdoctitle .title {
+  padding: 0 0 0 10px;
+  margin: 0 0 5px 0;
+  display: block; 
+  height: 20px; 
+  background-image: url(/iconos/back_title_doc.png);
+}
+
+.hrdocs .rangeNews {
+  margin: 0 0 0 75px;
+  font-size: 10px;
+  color: #facbcb;
+}
+
+.hrdocs .newsScroll {
+  overflow: hidden;
+}
+
+.hrdocs .hrdoc {
+  min-width: 200px; 
+  width: 100%; 
+  height: 45px;
+  background-image: url(/iconos/back_vertical_task.png);
+  background-repeat: repeat-x;
+  background-position: bottom left;
+}
+
+.hrdocs .hrdoc .images {
+  float: left; 
+  width: 50px; 
+  height: 43px; 
+}
+
+.hrdocs .hrdoc .images .image {
+  margin: 1px 2px 0 2px; 
+  width: 43px; 
+  height: 43px; 
+}
+
+.hrdocs .hrdoc .images .info {
+  top: -44px;
+  left: 2px;
+  position: relative;
+  width: 18px; 
+  height: 18px; 
+  cursor: pointer;
+}
+
+.hrdocs .hrdoc .description {
+  padding: 10px 0 0 0;
+}
+
+.hrdocs .hrdoc input {
+  font-size: 1px;
+}
+
+.description a {
+  text-decoration: none; 
+  color: #15314c;
+}
+
+.headersep {
+  height: 15px; 
+  width: 100%;
+}
+
+.tasks {
+  min-width: 200px;
+  min-height: 50px;
+  width: 100%;
+  background-color: #f1f2f5;
+}
+
+.tasks .taskstitle {
+  padding: 0 0 0 10px;
+  margin: 0 0 10px 0;
+  display: block; 
+  font-size: 13px; 
+  color: #fff; 
+  height: 20px; 
+  background-image: url(/iconos/back_title_task.png);
+}
+
+.tasks .notasks {
+  margin: 0 0 0 10px;
+}
+
+.tasks .taskbox {
+  min-width: 200px; 
+  width: 100%; 
+  margin: 5px 0;
+}
+
+.tasks .taskbox .title {
+  padding: 0 0 5px 10px;
+  font-size: 12px; 
+  color: #142f6e; 
+  display: block; 
+}
+
+.tasks .taskbox .tasksep {
+  background-image: url(/iconos/back_vertical_sep.png); 
+  background-repeat: repeat-x; 
+  height:2px; 
+  margin: 0 0 5px 0;
+}
+
+.tasks .taskbox .box {
+  width: 100%;
+  height: 100%;
+  display: block; 
+  background-image: url(/iconos/back_vertical_task.png);
+  background-repeat: repeat-x;
+  background-position: bottom left;
+  background-color: #f1f2f5;
+  min-height: 10px;
+}
+
+.tasks .taskbox .box .list {
+  margin: 2px auto;
+}
+
+.tasks .box .list .unsortedlist {
+  list-style-image: url(/iconos/img_list.png);
+  margin: 0px 0px 5px 25px;
+  cursor: default;
+}
+
+.tasks .box .list .unsortedlist li {
+  margin: 1px auto;
+}
+.tasks .taskbox .nobox {
+  display: block; 
+  height: 20px;
+}
+
+.tasks .nobox .list .nolist {
+  margin:15px 0 0 15px;
+}
+
+.dvDisabled {
+  background-color: #000;
+  width: 0px;
+  height: 0px;
+}
+
+.divPhoto {
+  background-color: #000;
+  width: 0px;
+  height: 0px;
+  border: 10px solid #fff;
+}
+
+.imgPhoto {
+  background-color: #fff;
+  width: 0px;
+  height: 0px;
+}
+
+.imgClose {
+  background-color: #fff;
+  width: 26px;
+  height: 26px;
+}
+
+.divDesc {
+  background-color: #f1f1f1;
+  width: 0px;
+  height: 0px;
+}
+
+.divDescOverflow {
+  background-color: transparent;
+  overflow: hidden;
+}
+
+.spanDesc {
+  color: #fff;
+  text-align: justify;
+}
+
+.divzoomDesc {
+  padding: 2px 5px 2px 5px;
+  vertical-align: middle;
+  text-align: justify;
+  background-color: #f9f9f9;
+  font-size: 14px;
+}
+
+.imgRewind {
+  background-color: #fff;
+  width: 26px;
+  height: 26px;
+}
+
+.imgForward {
+  background-color: #fff;
+  width: 26px;
+  height: 26px;
+}
+
+.imgInfo {
+  background-color: #fff;
+  width: 26px;
+  height: 26px;
+}
+
+/*******************************/
+div{
+	float:left;
+}
+.portaltitle .divright{
+	float:right;
+}
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/libreria/funciones_sse.js b/SSE/m4custom/CCL/libreria/funciones_sse.js
index 12e4b1ed..a692d72d 100644
--- a/SSE/m4custom/CCL/libreria/funciones_sse.js
+++ b/SSE/m4custom/CCL/libreria/funciones_sse.js
@@ -9,25 +9,20 @@ function addEvent(evnt, elem, func) {
 	}
 }
 
-try{
-	window._open = window.open; 
-	window.open = function(url,name,params){
-		var html = "<html><head><title>Visualizaci√≥n Documento</title>";
-		html += "</head><body style='margin: 0;'>";
-		html += "<iframe height='100%' width='100%' src='" + url +"'></iframe>";
-		html += "</body></html>";
-		win = window._open("", name, params);
-		win.document.write(html);
-		if(parent.ccl_openedWindows != null){
-			parent.ccl_openedWindows.push(win);
-		}else if(parent.parent.ccl_openedWindows != null){
-			parent.parent.ccl_openedWindows.push(win);
-		}
-		win.focus();
-		return win;
+function cclOpenDialog(url,name,params){
+	var html = "<html><head><title>Visualizaci√≥n Documento</title>";
+	html += "</head><body style='margin: 0;'>";
+	html += "<iframe height='100%' width='100%' src='" + url +"'></iframe>";
+	html += "</body></html>";
+	win = window.open("", name, params);
+	win.document.write(html);
+	if(parent.ccl_openedWindows != null){
+		parent.ccl_openedWindows.push(win);
+	}else if(parent.parent.ccl_openedWindows != null){
+		parent.parent.ccl_openedWindows.push(win);
 	}
-}catch(e){
-	alert('Error: '+ e.message);
+	win.focus();
+	return win;
 }
 
 
@@ -206,7 +201,7 @@ function m4opendialog(url, width, height) {
 				this.top = window.screenY + ((window.outerHeight - this.height) / 2);
 				var attr = "screenX=" + this.left + ",screenY=" + this.top + ",resizable=yes,scrollbars=yes,width=" + this.width + ",height=" + this.height;
 			// Genero el dialogo y me aseguro de que tiene el foco
-				this.win= window.open(this.url, this.name, attr);
+				this.win= cclOpenDialog(this.url, this.name, attr);
 
 		
 }
@@ -295,11 +290,40 @@ function m4titulo() {
 var ztitulo = document.title;
 return (ztitulo);
 }
-//***************************
-//FUNCION: m4fechahoy
-//FECHA:
-//COMENTARIOS: Devuelve la fecha de hoy en dd-mm-yyyy
-//***************************	
+
+
+
+
+
+
+function m4date_usu(dianumero,mesnumero,anio){
+var oreM = /M/i;
+var oreD = /D/i;
+var strdianumero = new String(dianumero); 
+if (strdianumero.length != 2){strdianumero = '0' + strdianumero;}
+var strmesnumero = new String(mesnumero);
+if (strmesnumero.length != 2){strmesnumero = '0' + strmesnumero;}
+
+	var scaracterinicial = sformatofechas.substring(0,1);
+		if (scaracterinicial =="D" || scaracterinicial =="d"){
+			if (sformatofechas.search(oreM) == 3 ) {
+			var sfechasec = strdianumero + g_ssepfechas + strmesnumero + g_ssepfechas+ anio;
+			}else{var sfechasec = strdianumero + g_ssepfechas + anio + g_ssepfechas + strmesnumero;}
+		}
+		if (scaracterinicial =="M"|| scaracterinicial =="m"){
+			if (sformatofechas.search(oreD) == 3 ){
+			var sfechasec = strmesnumero + g_ssepfechas + strdianumero + g_ssepfechas+ anio;
+			}else{var sfechasec = strmesnumero + g_ssepfechas+ anio + g_ssepfechas + strdianumero;}
+		}
+		if (scaracterinicial =="Y" || scaracterinicial =="y"){
+			if (sformatofechas.search(oreD) == 5 ){
+			var sfechasec = anio + g_ssepfechas + strdianumero + g_ssepfechas + strmesnumero;
+			}else{var sfechasec = anio + g_ssepfechas + strmesnumero + g_ssepfechas + strdianumero;}
+		}
+	return sfechasec;
+}
+
+
 function m4fechahoy(){	
 	 var d = new Date();	
 	 var s = new Date();	 
@@ -908,5 +932,74 @@ function m4urlencode(str) {
 return escape(str).replace(/\+/g,'%2B').replace(/%20/g, '+').replace(/\*/g, '%2A').replace(/\//g, '%2F').replace(/@/g, '%40');
 }
 
+function m4splitdate(sdate,adateinfo){
+var oreM = /M/i;var oreD = /D/i;var oreY = /Y/i;var oresep = g_ssepfechas;  
+var ap= new Array();
+var ny = sformatofechas.search(oreY);
+var nm = sformatofechas.search(oreM);
+var nd = sformatofechas.search(oreD);
+ap[ny] = "Y";ap[nm] = "M";ap[nd] = "D";
+var max = Math.max(Math.max(ny,nm),nd);
+if (max == ny) {var med= Math.max(nm,nd);var min=Math.min(nm,nd);}
+if (max == nm) {var med= Math.max(ny,nd);var min=Math.min(ny,nd);}
+if (max == nd) {var med= Math.max(ny,nm);var min=Math.min(ny,nm);}  
+var ocadena = new String(sdate);
+var atrozos = ocadena.split(oresep);
+var sday = "";
+
+if (ap[min] == "Y"){
+    syear = atrozos[0].toString();
+	if (ap[med] == "M"){smonth =  atrozos[1].toString(); sday = atrozos[2].toString();}
+	if (ap[med] == "D"){smonth =  atrozos[2].toString();sday = atrozos[1].toString();} 
+}
+if (ap[min] == "M"){
+	smonth = atrozos[0].toString();
+	if (ap[med] == "D"){sday = atrozos[1].toString(); syear =atrozos[2].toString();}
+	if (ap[med] == "Y"){sday = atrozos[2].toString();  syear =atrozos[1].toString();} 
+} 
+if (ap[min] == "D"){
+	sday = atrozos[0].toString();
+	if (ap[med] == "Y"){syear =atrozos[1].toString();smonth =  atrozos[2].toString();}
+	if (ap[med] == "M"){syear =atrozos[2].toString();smonth =  atrozos[1].toString();} 
+}
+
+
+
+   adateinfo[0] = sday;
+
+   adateinfo[1] = smonth;
+   adateinfo[2] = syear;
+
+return;
+}
+
+function m4builtdate(dianumero,mesnumero,anio){
+var oreM = /M/i;var oreD = /D/i;var oreY = /Y/i;var oresep = g_ssepfechas;  
+	//Correccion para el dia y mes con una sola cifra, ejemplo: 1=01
+    var strdianumero = new String(dianumero); 
+	if (strdianumero.length != 2){strdianumero = '0' + strdianumero;}
+	var strmesnumero = new String(mesnumero);
+	if (strmesnumero.length != 2){strmesnumero = '0' + strmesnumero;}
+	//Construccion de la fecha segun el formato
+
+	var scaracterinicial = sformatofechas.substring(0,1);
+
+		if (scaracterinicial =="D" || scaracterinicial =="d"){
+			if (sformatofechas.search(oreM) == 3 ) {
+			var sfechasec = strdianumero + g_ssepfechas + strmesnumero + g_ssepfechas+ anio;
+			}else{var sfechasec = strdianumero + g_ssepfechas + anio + g_ssepfechas + strmesnumero;}
+		}
+		if (scaracterinicial =="M"|| scaracterinicial =="m"){
+			if (sformatofechas.search(oreD) == 3 ){
+			var sfechasec = strmesnumero + g_ssepfechas + strdianumero + g_ssepfechas+ anio;
+			}else{var sfechasec = strmesnumero + g_ssepfechas+ anio + g_ssepfechas + strdianumero;}
+		}
+		if (scaracterinicial =="Y" || scaracterinicial =="y"){
+			if (sformatofechas.search(oreD) == 5 ){
+			var sfechasec = anio + g_ssepfechas + strdianumero + g_ssepfechas + strmesnumero;
+			}else{var sfechasec = anio + g_ssepfechas + strmesnumero + g_ssepfechas + strdianumero;}
+		}
+	return sfechasec;
+}
 
 
diff --git a/SSE/m4custom/CCL/libreria/functions_portal.js b/SSE/m4custom/CCL/libreria/functions_portal.js
new file mode 100644
index 00000000..84048c86
--- /dev/null
+++ b/SSE/m4custom/CCL/libreria/functions_portal.js
@@ -0,0 +1,1005 @@
+//Original code file: functions_portal.raw.js
+//Use the above mentioned file for modifications or debugging.
+
+var Meta4 = {};
+Meta4.portal = function () {
+	var bEss = true,
+	bMenuBlocked = false,
+	iMenuWrapperWidth,
+	iContentWrapperLeft,
+	iOffsetHeigth = 0,
+	iOffsetWidth = 0,
+	oContentWrapper,
+	oMenuWrapper,
+	oPortal,
+	sUrlLogin,
+	sUrlPortalEss = '../sse_generico/ssco_portal.jsp',
+	sUrlPortalMss = '../mss_generico/smco_portal.jsp',
+	sUrlPutObject = '../sse_generico/sgco_put_object.jsp';
+	function updateOffset() {
+		try {
+			iOffsetHeigth = document.body.offsetHeigth;
+			iOffsetWidth = document.body.offsetWidth;
+		} catch (e) {
+			iOffsetHeigth = 0;
+			iOffsetWidth = 0;
+		}
+	}
+	function init(ai_oPortal, ai_oMenuWrapper, ai_oMenu, ai_oContentWrapper, ai_sUrlLogin, ai_bEss) {
+		oPortal = ai_oPortal;
+		oMenuWrapper = ai_oMenuWrapper;
+		oMenu = ai_oMenu;
+		oContentWrapper = ai_oContentWrapper;
+		sUrlLogin = ai_sUrlLogin;
+		bEss = ai_bEss;
+		updateOffset();
+		iMenuWrapperWidth = oMenuWrapper.offsetWidth;
+		iContentWrapperLeft = +oContentWrapper.getStyle('m4marginLeftMenu');
+	}
+	return {
+		init: function (ai_oPortal, ai_oMenuWrapper, ai_oMenu, ai_oContentWrapper, ai_sUrlLogin, ai_bEss) {
+			init(ai_oPortal, ai_oMenuWrapper, ai_oMenu, ai_oContentWrapper, ai_sUrlLogin, ai_bEss);
+		},
+		initEss: function (ai_oPortal, ai_sUrlLogin) {
+			init(ai_oPortal, ai_sUrlLogin, true);
+		},
+		initMss: function (ai_oPortal, ai_sUrlLogin) {
+			init(ai_oPortal, ai_sUrlLogin, false);
+		},
+		changePortal: function () {
+			Meta4.frameBody.setEventTakenCareOf();
+			var sNewsURL = (bEss) ? sUrlPortalMss : sUrlPortalEss;
+			if (Meta4.IE6) {
+				window.location = sNewsURL;
+			} else {
+				window.location.href = sNewsURL;
+			}
+		},
+		getEss: function () {
+			return bEss;
+		},
+		offsetChanged: function () {
+			var bResult = false;
+			try {
+				if (iOffsetHeigth !== document.body.offsetHeigth || iOffsetWidth !== document.body.offsetWidth) {
+					bResult = true;
+					updateOffset();
+				}
+			} catch (e) {
+				iOffsetHeigth = 0;
+				iOffsetWidth = 0;
+			}
+			return bResult;
+		},
+		setMinWidth: function (ai_iWidth) {
+			var iCurrentWidth = 0;
+			iCurrentWidth = oPortal.scrollWidth + oPortal.offsetWidth - oPortal.clientWidth;
+			if (iCurrentWidth < ai_iWidth) {
+				oPortal.style.width = String(ai_iWidth) + 'px';
+			}
+		},
+		setMaxWidth: function () {
+			oPortal.style.width = '100%';
+		},
+		showLogin: function () {
+			if (sUrlLogin) {
+				window.location.pathname = sUrlLogin;
+			}
+		},
+		toggleMenu: function (ev) {
+			var bMenuVisible = (oMenuWrapper.clientHeight !== 0),
+			fxWrapper = new Fx.Tween(oMenuWrapper, {
+					duration: 750
+				}),
+			fxElement = new Fx.Tween(oMenu, {
+					duration: 750
+				}),
+			fxContent = new Fx.Tween(oContentWrapper);
+			if (ev) {
+				ev.preventDefault();
+			}
+			if (!bMenuBlocked) {
+				bMenuBlocked = true;
+				Meta4.ajax.sendAsync(sUrlPutObject, [['sId', 'SGCO_IND_SHOW_MENU'], ['sValue', !bMenuVisible]]);
+				if (bMenuVisible) {
+					fxWrapper.start('height', 0);
+					fxElement.start('margin-top', -oMenuWrapper.clientHeight);
+					fxWrapper.addEvent('complete', function () {
+						fxContent.start('margin-left', -10);
+						fxContent.addEvent('complete', function () {
+							bMenuBlocked = false;
+							$('hideMenu').addClass('hidden');
+							$('showMenu').removeClass('hidden');
+						});
+					});
+				} else {
+					oMenu.setStyle('margin-top', -oMenu.clientHeight);
+					fxContent.start('margin-left', iContentWrapperLeft);
+					fxContent.addEvent('complete', function () {
+						fxWrapper.start('height', null);
+						fxElement.start('margin-top', 0);
+						fxWrapper.addEvent('complete', function () {
+							bMenuBlocked = false;
+							$('showMenu').addClass('hidden');
+							$('hideMenu').removeClass('hidden');
+						});
+					});
+				}
+				bMenuVisible = !bMenuVisible;
+			}
+		}
+	};
+}
+();
+Meta4.menu = function () {
+	var bEss = true,
+	bNavigate = false,
+	oAccordion = [],
+	oDivWait,
+	oLastResponse,
+	sDeleteOperation = 'Delete',
+	sLastUrl,
+	sPathFavourites,
+	sUrlCheckLink = '/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_back.jsp',
+	sUrlDeleteFavourite = '/servlet/CheckSecurity/JSP/sse_generico/sgco_favourite_back.jsp';
+	function addAccordion(ai_oAccordion) {
+		oAccordion[oAccordion.length] = ai_oAccordion;
+	}
+	function activateAccordion(ai_sPath) {
+		var i,
+		saPath;
+		if (ai_sPath && ai_sPath !== '') {
+			saPath = ai_sPath.split(/;/g);
+			for (i = 0; i < saPath.length; i++) {
+				if (oAccordion[i].elements[+saPath[i]].offsetHeight === 0) {
+					oAccordion[i].display(+saPath[i]);
+				}
+			}
+		}
+	}
+	function showFavourites() {
+		activateAccordion(sPathFavourites);
+	}
+	function destroyObject(ai_oObject) {
+		ai_oObject.destroy();
+	}
+	return {
+		init: function (ai_oDivWait, ai_bUseFirstMenuOption) {
+			var heightValue = (window.ie6) ? '100%' : '',
+			togglerName = 'div.scoMenuLeft div.title_',
+			togglerSubName = 'div.scoMenuLeft span.title_',
+			contentName = 'div.scoMenuLeft div.content_',
+			counter = 1,
+			togglers = $$(togglerName + counter),
+			contents = $$(contentName + counter);
+			oDivWait = ai_oDivWait;
+			bEss = Meta4.portal.getEss();
+			sPathFavourites = (togglers.length >= 2) ? String(togglers.length - 2) + ';' : '';
+			togglers.each(function (ai_oToggler) {
+				ai_oToggler.addClass('m4activeColor');
+				ai_oToggler.activeColor = ai_oToggler.getStyle('color');
+				ai_oToggler.removeClass('m4activeColor');
+				ai_oToggler.origColor = ai_oToggler.getStyle('color');
+				ai_oToggler.fx = new Fx.Tween(ai_oToggler, 'color');
+			});
+			while (togglers.length > 0) {
+				addAccordion(new Accordion(togglers, contents, {
+						opacity: false,
+						alwaysHide: (counter !== 1),
+						start: 'all-closed',
+						onComplete: function () {
+							var element = $(this.elements[this.previous]);
+							if (element && element.offsetHeight > 0) {
+								element.setStyle('height', heightValue);
+							};
+						},
+						onActive: function (toggler, content) {
+							if (toggler.fx != null) {
+								toggler.fx.start('color', toggler.activeColor);
+							}
+							toggler.removeClass('divImgClosed');
+							toggler.addClass('divImgOpen');
+						},
+						onBackground: function (toggler, content) {
+							if (toggler.fx != null) {
+								toggler.fx.start('color', toggler.origColor);
+							}
+							toggler.removeClass('divImgOpen');
+							toggler.addClass('divImgClosed');
+						}
+					}));
+				counter++;
+				togglers = $$(togglerSubName + counter);
+				contents = $$(contentName + counter);
+			}
+		},
+		interceptEvent: function (ev) {
+			if(!ev)ev=event;
+			var sUrl,
+			oResponse;
+			if (ev.type === 'click' && ev.target.tagName === 'A') {
+				if (ev.target.protocol === 'mailto:') {}
+				else if (ev.target.protocol === 'javascript:') {}
+				else {
+					sUrl = '';
+					if (Browser.Engine.name == 'trident' || Browser.Engine.name == 'presto') {
+						sUrl = '/';
+					}
+					sUrl = sUrl + ev.target.pathname + ev.target.search;
+					oResponse = Meta4.menu.validateUrl(sUrl);
+					if (oResponse) {
+						switch (oResponse.result) {
+						case '1':
+							Meta4.frameBody.setLoadMode(sUrl);
+							break;
+						case '-1':
+							Meta4.portal.changePortal();
+							break;
+						case '':
+							Meta4.frameBody.setLoadMode(sUrl);
+							break;
+						case '0':
+							break;
+						default:
+						}
+						ev.preventDefault();
+					}
+				}
+			}
+		},
+		activateAccordion: function (ai_sPath) {
+			activateAccordion(ai_sPath);
+		},
+		validateUrl: function (ai_sUrl) {
+			if (sLastUrl !== ai_sUrl) {
+				sLastUrl = ai_sUrl;
+				Meta4.ajax.sendSyncJSON(sUrlCheckLink, [['sUrl', ai_sUrl], ['bEss', bEss]]);
+				oLastResponse = Meta4.ajax.getResponseJSON();
+			}
+			return oLastResponse;
+		},
+		compareToLastValidatedUrl: function (ai_sUrl) {
+			var oResponse;
+			if (ai_sUrl !== sLastUrl && sLastUrl !== undefined) {
+				oResponse = this.validateUrl(ai_sUrl);
+				if (oResponse) {
+					switch (oResponse.result) {
+					case '1':
+						this.activateAccordion(oResponse.path);
+						break;
+					case '-1':
+						Meta4.portal.changePortal();
+						break;
+					case '0':
+						break;
+					default:
+					}
+				}
+			}
+		},
+		setUrlEss: function (ai_sUrl) {
+			Meta4.ajax.sendSync(sUrlCheckLink, [['sNextUrl', ai_sUrl], ['bEss', true]]);
+		},
+		setUrlMss: function (ai_sUrl) {
+			Meta4.ajax.sendSync(sUrlCheckLink, [['sNextUrl', ai_sUrl], ['bEss', false]]);
+		},
+		navigate: function (ai_sUrl) {
+			Meta4.frameBody.setEventTakenCareOf();
+			Meta4.frameBody.setLoadMode(ai_sUrl);
+		},
+		getNavigate: function () {
+			return bNavigate;
+		},
+		addFavourite: function (ai_iOrdinal, ai_sTitle, ai_sUrl) {
+			var oTemplateLI = $('favouriteLiTemplate'),
+			oFavouriteUL = $('menuLeftFavouritesUL'),
+			oFavouriteLI,
+			oFavouriteLiDiv,
+			oFx;
+			if (oTemplateLI) {
+				try {
+					oFavouriteLI = oTemplateLI.clone();
+					oFavouriteLI.id = 'favourite' + String(ai_iOrdinal);
+					oFavouriteLiDiv = oFavouriteLI.childNodes[0];
+					oFavouriteLiDiv.childNodes[0].title = ai_sTitle;
+					oFavouriteLiDiv.childNodes[0].href = ai_sUrl;
+					oFavouriteLiDiv.childNodes[0].childNodes[0].data = ai_sTitle;
+					oFavouriteUL.appendChild(oFavouriteLI);
+					oFavouriteLiDiv.childNodes[1].addEvent('click', function () {
+						Meta4.menu.deleteFavourite(ai_iOrdinal);
+					});
+					oFx = new Fx.Morph(oFavouriteLiDiv, {
+							duration: 1000,
+							link: 'chain'
+						});
+					oFx.set({
+						'opacity': 0
+					});
+					oFx.start.pass({
+						'opacity': 1
+					}, oFx).delay(500);
+				} catch (e) {}
+				showFavourites();
+			}
+		},
+		modifyFavourite: function (ai_iOrdinal, ai_sTitle) {
+			var oLI = $('favourite' + String(ai_iOrdinal)),
+			oFx;
+			if (oLI) {
+				try {
+					oLI.childNodes[0].childNodes[0].title = ai_sTitle;
+					oLI.childNodes[0].childNodes[0].childNodes[0].data = ai_sTitle;
+					showFavourites();
+					oFx = new Fx.Tween(oLI, {
+							property: 'opacity',
+							duration: 500,
+							link: 'chain'
+						});
+					oFx.start.pass(0.2, oFx).delay(500);
+					oFx.start.pass(1, oFx).delay(600);
+				} catch (e) {}
+			}
+		},
+		deleteFavourite: function (ai_iOrdinal) {
+			var oLI = $('favourite' + String(ai_iOrdinal)),
+			oResponse = null,
+			oFx;
+			if (oLI) {
+				Meta4.ajax.sendSyncJSON(sUrlDeleteFavourite, [['sOperation', sDeleteOperation], ['sOrdinal', String(ai_iOrdinal)]]);
+				oResponse = Meta4.ajax.getResponseJSON();
+				if (oResponse && oResponse.result === 0) {
+					oFx = new Fx.Morph(oLI, {
+							duration: 400
+						}).start({
+							'opacity': 0
+						});
+					destroyObject.pass(oLI).delay(400);
+				}
+			}
+		}
+	};
+}
+();
+Meta4.menu.search = function () {
+	var bUpdateSession = false,
+	bClearOnly = false,
+	htmlMinLength,
+	htmlNoSearch,
+	minLength = 2,
+	oForm = undefined,
+	oInput = undefined,
+	oResult = undefined,
+	previousCriterion,
+	textInitialString;
+	function clearServer() {
+		if (bUpdateSession) {
+			bUpdateSession = false;
+			if (oInput.value === textInitialString || oInput.value.length < minLength) {
+				bClearOnly = true;
+				oForm.send();
+			}
+		}
+	}
+	return {
+		init: function (ai_oForm, ai_oInput, ai_oResult, ai_sInitialString, ai_htmlMinLength, ai_htmlNoSearch, ai_sCriterion) {
+			oForm = ai_oForm;
+			oInput = ai_oInput;
+			oResult = ai_oResult;
+			textInitialString = ai_sInitialString;
+			htmlMinLength = ai_htmlMinLength;
+			htmlNoSearch = ai_htmlNoSearch;
+			oInput.value = ai_sCriterion || ai_sInitialString;
+			bUpdateSession = (ai_sCriterion) ? true : false;
+			if (oForm) {
+				oForm.addEvent('submit', function (ev) {
+					ev.preventDefault();
+				});
+				oForm.set('send', {
+					onComplete: function (response) {
+						if (bClearOnly) {
+							bClearOnly = false;
+						} else {
+							oResult.removeClass('scoSpinner').set('html', response);
+						}
+					}
+				});
+			}
+		},
+		clear: function () {
+			if (oInput.value === textInitialString) {
+				oInput.value = '';
+				oResult.empty().set('html', htmlMinLength);
+			} else {
+				oInput.select();
+				this.search();
+			}
+			oInput.removeClass('inactive');
+		},
+		restore: function () {
+			clearServer();
+			if (oInput.value === '' || oInput.value === textInitialString) {
+				oInput.value = textInitialString;
+				oInput.addClass('inactive');
+				oResult.empty().set('html', htmlNoSearch);
+			}
+		},
+		search: function () {
+			var criterion = oInput.value.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
+			if (criterion.length >= minLength) {
+				if (criterion !== previousCriterion) {
+					previousCriterion = criterion;
+					oResult.empty().addClass('scoSpinner');
+					bUpdateSession = true;
+					oForm.send();
+				}
+			} else {
+				bUpdateSession = true;
+				oResult.empty().removeClass('scoSpinner').set('html', htmlMinLength);
+				previousCriterion = criterion;
+			}
+		},
+		getCriterion: function () {
+			return (oInput.value !== textInitialString) ? oInput.value : null;
+		}
+	};
+}
+();
+Meta4.header = function () {
+	var oButtonAddFavourite,
+	sOperationAdd = 'Add',
+	sUrlHome,
+	sUrlAddFavourite = '/servlet/CheckSecurity/JSP/sse_generico/sgco_favourite_back.jsp',
+	sUrlLogout = '/servlet/CheckSecurity/JSP/sse_generico/sse_logout.jsp',
+	sUrlWhoIsWho = '/servlet/CheckSecurity/JSP/sse_g0/sse_g0_buscar_contactos.jsp';
+	return {
+		init: function (ai_sUrlHome, ai_oButtonAddFavourite) {
+			sUrlHome = ai_sUrlHome;
+			oButtonAddFavourite = ai_oButtonAddFavourite;
+		},
+		home: function () {
+			if (sUrlHome) {
+				Meta4.frameBody.setLoadMode(sUrlHome);
+			}
+		},
+		whoIsWho: function () {
+			Meta4.menu.setUrlEss(sUrlWhoIsWho);
+			if (Meta4.portal.getEss()) {
+				Meta4.frameBody.setLoadMode(sUrlWhoIsWho);
+				Meta4.frameBody.updateSrc(sUrlWhoIsWho);
+			} else {
+				Meta4.portal.changePortal();
+			}
+		},
+		addFavourite: function () {
+			var sTitle = Meta4.frameBody.getTitle(),
+			sUrl = Meta4.frameBody.getLocation(),
+			oResponse = null,
+			oFx;
+			if (sTitle && sUrl) {
+				Meta4.ajax.sendSyncJSON(sUrlAddFavourite, [['sOperation', sOperationAdd], ['sUrl', sUrl], ['sName', sTitle]]);
+				oResponse = Meta4.ajax.getResponseJSON();
+				if (oResponse) {
+					if (oResponse.result < 0) {
+						Meta4.menu.modifyFavourite(-1 * oResponse.result, sTitle);
+					} else if (oResponse.result > 0) {
+						Meta4.menu.addFavourite(oResponse.result, sTitle, sUrl);
+					}
+				}
+				oFx = new Fx.Morph(oButtonAddFavourite, {
+						duration: 500,
+						link: 'chain'
+					});
+				oFx.start({
+					'opacity': 0.2
+				}).start({
+					'opacity': 1
+				});
+			}
+		},
+		iconHot: function (ai_oImgTag) {
+			if (ai_oImgTag.m4SrcHot) {
+				ai_oImgTag.src = ai_oImgTag.m4SrcHot;
+			}
+		},
+		iconNormal: function (ai_oImgTag) {
+			if (ai_oImgTag.m4SrcNormal) {
+				ai_oImgTag.src = ai_oImgTag.m4SrcNormal;
+			}
+		},
+		beforeLoad: function () {},
+		afterLoad: function () {},
+		changePortal: function () {
+			Meta4.portal.changePortal();
+		},
+		logout: function () {
+			Meta4.frameBody.setEventTakenCareOf();
+			if (Meta4.IE6) {
+				window.location = sUrlLogout;
+			} else {
+				window.location.href = sUrlLogout;
+			}
+		}
+	};
+}
+();
+Meta4.frameBody = function () {
+	var bEss = true,
+	bEventTakenCareOf = false,
+	iContentScrollHeigth = 0,
+	iContentScrollWidth = 0,
+	oDivWait,
+	oFrame,
+	sCurrentPathname,
+	sDefaultHeight = '600',
+	sParamEss = 'sgcoPortalEss',
+	sParamUrl = 'sgcoPortalDestinationUrl',
+	sUrlGenericUpdate = '/servlet/CheckSecurity/JSP/sse_generico/generico_actualizar.jsp',
+	sUrlLogin = '/sse_generico/generico_login.jsp',
+	sUrlPortalEss = '/servlet/CheckSecurity/JSP/sse_generico/ssco_portal.jsp',
+	sUrlPortalMss = '/servlet/CheckSecurity/JSP/mss_generico/smco_portal.jsp',
+	sUrlRestoreRequest = '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp',
+	sUrlStoreRequest = '/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_back.jsp';
+	function setLoadMode(sWhere) {
+		var oFx;
+		oFx = new Fx.Morph(oFrame, {
+				duration: 100
+			}).start({
+				'opacity': 0.1
+			}).chain(function () {
+				if (sWhere) {
+					Meta4.frameBody.updateSrc(sWhere)
+				}
+			});
+		oDivWait.removeClass('displayNone');
+		bEventTakenCareOf = true;
+		Meta4.header.beforeLoad();
+	}
+	function reverseLoadMode() {
+		oDivWait.addClass('scoSpinnerRev');
+		bEventTakenCareOf = true;
+	}
+	function resetLoadMode() {
+		var oFx;
+		oDivWait.addClass('displayNone');
+		oDivWait.removeClass('scoSpinnerRev');
+		Meta4.frameBody.resize();
+		oFx = new Fx.Morph(oFrame, {
+				duration: 100
+			}).start({
+				'opacity': 1
+			}).chain(function () {
+				Meta4.header.afterLoad()
+			});
+	}
+	function formSubmit(ai_oForm) {
+		var bSubmitForm = true,
+		oForm,
+		sUrl,
+		sPathName;
+		if (!ai_oForm.target) {
+			sUrl = (ai_oForm.action);
+			sPathName = sUrl.toLowerCase().substring(0, sUrl.toLowerCase().indexOf('.jsp')) + '.jsp';
+			setLoadMode();
+			if ((oFrame.contentWindow.location.pathname).toLowerCase() !== sPathName) {
+				oForm = new Element(ai_oForm);
+				oForm.set('send', {
+					url: sUrlStoreRequest,
+					async: false,
+					onComplete: function (response) {
+						var oResponse = JSON.decode(response, true);
+						if (oResponse) {
+							switch (oResponse.result) {
+							case '1':
+								Meta4.menu.activateAccordion(oResponse.path);
+								break;
+							case '-1':
+								Meta4.portal.changePortal();
+								bSubmitForm = false;
+								break;
+							case '0':
+								break;
+							default:
+							}
+						}
+					}
+				});
+				oForm.send(sUrlStoreRequest + '?' + sParamEss + '=' + bEss + '&' + sParamUrl + '=' + encodeURIComponent(sUrl));
+			}
+		}
+		return bSubmitForm;
+	}
+	return {
+		init: function (ai_oDivWait, ai_oFrame) {
+			oDivWait = ai_oDivWait;
+			oFrame = ai_oFrame;
+			bEss = Meta4.portal.getEss();
+		},
+		setLoadMode: function (sWhere) {
+			setLoadMode(sWhere);
+		},
+		resetLoadMode: function () {
+			resetLoadMode();
+		},
+		getLocation: function () {
+			var sLocation = null;
+			try {
+				sLocation = oFrame.contentWindow.location.pathname + oFrame.contentWindow.location.search;
+			} catch (e) {}
+			return sLocation;
+		},
+		getTitle: function () {
+			return oFrame.contentWindow.document.title;
+		},
+		getSrc: function () {
+			return oFrame.src || null;
+		},
+		updateSrc: function (ai_sUrl) {
+			if (ai_sUrl) {
+				oFrame.src = ai_sUrl;
+			}
+		},
+		afterLoad: function () {
+			var aoChildNodes,
+			aoForms,
+			bKeepGoing,
+			i,
+			oResponse,
+			sLocation = this.getLocation();
+			try {
+				oFrame.contentWindow.bNullHeight = (oFrame.contentWindow.document.body.scrollHeight + oFrame.contentWindow.document.body.offsetHeight - oFrame.contentWindow.document.body.clientHeight == 0);
+				oFrame.contentWindow.bLoaded = true;
+				if (sLocation === sUrlPortalEss || sLocation === sUrlPortalMss) {
+					this.setLoadMode(oFrame.contentWindow.m4frameContent);
+				} else if (sLocation === sUrlLogin) {
+					Meta4.portal.showLogin();
+				} else if (sLocation !== sUrlRestoreRequest) {
+					window.m4frameContent = sLocation;
+					oResponse = Meta4.menu.validateUrl(sLocation);
+					if (oResponse) {
+						switch (oResponse.result) {
+						case '1':
+							Meta4.menu.activateAccordion(oResponse.path);
+							break;
+						case '-1':
+							Meta4.portal.changePortal();
+							break;
+						case '0':
+							break;
+						default:
+						}
+					}
+					try {
+						bEventTakenCareOf = false;
+						sCurrentPathname = oFrame.contentWindow.location.pathname;
+						if (oFrame.contentWindow.document) {
+							oFrame.contentWindow.document.addEvent('click', function (ev) {
+								var oEventElement,
+								sUrl;
+								if (ev.type === 'click') {
+									if (ev.target.tagName === 'IMG') {
+										oEventElement = ev.target.parentNode;
+									} else {
+										oEventElement = ev.target;
+									}
+									if (oEventElement.tagName === 'A') {
+										if (oEventElement.protocol === 'mailto:') {
+											bEventTakenCareOf = true;
+										} else if (oEventElement.protocol === 'javascript:') {
+											bEventTakenCareOf = true;
+										} else {
+											if (oEventElement.pathname !== undefined) {
+												bEventTakenCareOf = true;
+												if (oEventElement.pathname.toLowerCase().indexOf('.jsp') !== -1) {
+													sUrl = '';
+													if (Browser.Engine.name == 'trident' || Browser.Engine.name == 'presto') {
+														sUrl = '/';
+													}
+													sUrl = sUrl + oEventElement.pathname + oEventElement.search;
+													setLoadMode();
+													oResponse = Meta4.menu.validateUrl(sUrl);
+													if (oResponse) {
+														switch (oResponse.result) {
+														case '1':
+															Meta4.menu.activateAccordion(oResponse.path);
+															break;
+														case '-1':
+															ev.preventDefault();
+															Meta4.portal.changePortal();
+															break;
+														case '0':
+															break;
+														default:
+														}
+													}
+												}
+											}
+										}
+									}
+								}
+							});
+							oFrame.contentWindow.addEvent('unload', function (ev) {
+								var oLocation,
+								sUrl;
+								if (!bEventTakenCareOf) {
+									oLocation = oFrame.contentWindow.location;
+									if (oLocation.protocol === 'mailto:') {}
+									else if (oLocation.protocol === 'javascript:') {}
+									else {
+										switch (oLocation.pathname) {
+										case sUrlGenericUpdate:
+											break;
+										case sCurrentPathname:
+											setLoadMode();
+											break;
+										default:
+											if (oLocation.pathname.toLowerCase().indexOf('.jsp') !== -1) {
+												sUrl = '';
+												if (Browser.Engine.name == 'trident' || Browser.Engine.name == 'presto') {
+													sUrl = '/';
+												}
+												sUrl = sUrl + oLocation.pathname + oLocation.search;
+												setLoadMode();
+												oResponse = Meta4.menu.validateUrl(sUrl);
+												if (oResponse) {
+													switch (oResponse.result) {
+													case '1':
+														Meta4.menu.activateAccordion(oResponse.path);
+														break;
+													case '-1':
+														Meta4.portal.changePortal();
+														break;
+													case '0':
+														break;
+													default:
+													}
+												}
+											}
+										}
+									}
+								}
+							});
+							oFrame.contentWindow.addEvent('resize', function (ev) {
+								Meta4.frameBody.resize();
+							});
+							aoForms = oFrame.contentWindow.document.forms;
+							if (aoForms.length) {
+								for (i = 0; i < aoForms.length; i++) {
+									if (aoForms[i].submit.tagname === undefined) {
+										aoForms[i].nativeSubmit = aoForms[i].submit;
+										aoForms[i].submit = function () {
+											var bResult = formSubmit(this);
+											bEventTakenCareOf = true;
+											if (bResult) {
+												this.nativeSubmit();
+											}
+										};
+									}
+								}
+							}
+							if (oFrame.contentWindow.document.body) {
+								aoChildNodes = oFrame.contentWindow.document.body.childNodes;
+								bKeepGoing = true;
+								for (i = 0; i < aoChildNodes.length && bKeepGoing; i++) {
+									if (aoChildNodes[i].tagName !== 'SCRIPT' && aoChildNodes[i].tagName !== '!') {
+										if (aoChildNodes[i].tagName !== 'DIV') {
+											bKeepGoing = false;
+										} else {
+											if (!(aoChildNodes[i].m4top && aoChildNodes[i].m4top.toLowerCase() === 'nochange')) {
+												if (aoChildNodes[i].style.position !== 'static' && aoChildNodes[i].style.top !== 0) {
+													aoChildNodes[i].style.top = 0;
+													if (aoChildNodes[i].style.position === 'absolute') {
+														aoChildNodes[i].style.position = 'relative';
+													}
+												}
+											}
+										}
+									}
+								}
+							}
+						}
+					} catch (e) {}
+					resetLoadMode();
+				} else {
+					reverseLoadMode();
+				}
+			} catch (e) {
+				Meta4.frameBody.resize();
+				resetLoadMode();
+			}
+		},
+		resize: function () {
+			var bWindowSizeChanged = Meta4.portal.offsetChanged(),
+			bContentHeighChanged = false,
+			bContentWidthChanged = false,
+			iDiffWidth = 0,
+			iNewHeight = 0,
+			iNewWidth = 0,
+			i = 0,
+			iMaxHeight = 0,
+			iMaxWidth = 0,
+			oContentBody;
+			try {
+				oContentBody = oFrame.contentWindow.document.body;
+				if (oFrame.contentWindow.bNullHeight) {
+					if (bWindowSizeChanged || oFrame.contentWindow.bLoaded) {
+						for (i = 0; i < oContentBody.childNodes.length - 1; i++) {
+							if (oContentBody.childNodes(i).style.display != 'none') {
+								iNewHeight = oContentBody.childNodes(i).offsetTop + oContentBody.childNodes(i).scrollHeight + oContentBody.childNodes(i).offsetHeight - oContentBody.childNodes(i).clientHeight;
+								if (iMaxHeight < iNewHeight) {
+									iMaxHeight = iNewHeight;
+								}
+								iNewWidth = oContentBody.childNodes(i).offsetLeft + oContentBody.childNodes(i).scrollWidth + oContentBody.childNodes(i).offsetWidth - oContentBody.childNodes(i).clientWidth;
+								if (iMaxWidth < iNewWidth) {
+									iMaxWidth = iNewWidth;
+								}
+							}
+						}
+						iMaxWidth += oFrame.offsetLeft - (+oContentBody.leftMargin);
+						oFrame.style.height = String(iMaxHeight) + 'px';
+						oFrame.style.width = '100%';
+						Meta4.portal.setMinWidth(iMaxWidth);
+						oFrame.contentWindow.bLoaded = false;
+					}
+				} else {
+					var objContentScroll = (oFrame.contentDocument) ? oFrame.contentDocument : oFrame.contentWindow.document;
+					var curScrollHeight = Math.min(objContentScroll.documentElement.scrollHeight, objContentScroll.body.scrollHeight);
+					if (iContentScrollHeigth !== curScrollHeight) {
+						iContentScrollHeigth = curScrollHeight;
+						bContentHeighChanged = true;
+					}
+					if (iContentScrollWidth !== oContentBody.scrollWidth) {
+						iContentScrollWidth = oContentBody.scrollWidth;
+						bContentWidthChanged = true;
+					}
+					if (bWindowSizeChanged || bContentWidthChanged) {
+						Meta4.portal.setMaxWidth();
+						iDiffWidth = oContentBody.scrollWidth - oContentBody.clientWidth;
+						if (iDiffWidth > 0) {
+							iNewWidth = oFrame.offsetLeft;
+							iNewWidth += oContentBody.scrollWidth + oContentBody.offsetWidth - oContentBody.clientWidth;
+							iNewWidth += oContentBody.offsetLeft;
+							iNewWidth -= 1;
+							Meta4.portal.setMinWidth(iNewWidth);
+						}
+					}
+					if (bWindowSizeChanged || bContentHeighChanged || bContentWidthChanged) {
+						oContentBody.style.marginBottom = "0px";
+						oContentBody.style.marginLeft = "0px";
+						oContentBody.style.marginRight = "0px";
+						oFrame.style.height = String(curScrollHeight + 15) + 'px';
+					}
+				}
+			} catch (e) {
+				oFrame.height = sDefaultHeight;
+			}
+		},
+		refresh: function () {
+			if (oFrame.contentWindow) {
+				this.setLoadMode();
+				oFrame.contentWindow.location.reload(true);
+			}
+		},
+		setEventTakenCareOf: function () {
+			bEventTakenCareOf = true;
+		}
+	};
+}
+();
+Meta4.ajax = function () {
+	var oRequestSync,
+	oRequestSyncJSON,
+	oResponseJSON,
+	sResponse,
+	getResponse = function (responseText, responseXML) {
+		sResponse = responseText;
+	};
+	getResponseJSON = function (responseJSON, responseText) {
+		oResponseJSON = responseJSON;
+	};
+	function createRequest(ai_bAsync) {
+		return new Request({
+			link: 'cancel',
+			async: ai_bAsync,
+			onSuccess: getResponse
+		});
+	}
+	function createRequestJSON(ai_bAsync) {
+		return new Request.JSON({
+			link: 'cancel',
+			async: ai_bAsync,
+			onSuccess: getResponseJSON
+		});
+	}
+	function send(ai_bJSON, ai_bAsync, ai_sUrl, ai_saParams) {
+		var i,
+		sParams = '';
+		if (ai_saParams && ai_saParams.length !== 0) {
+			for (i = 0; i < ai_saParams.length; i++) {
+				if (sParams !== '') {
+					sParams += '&';
+				}
+				sParams += ai_saParams[i][0] + '=' + encodeURIComponent(ai_saParams[i][1]);
+			}
+		}
+		if (ai_bJSON) {
+			if (!oRequestSyncJSON) {
+				oRequestSyncJSON = createRequestJSON(ai_bAsync);
+			}
+			oRequestSyncJSON.send({
+				url: ai_sUrl,
+				data: sParams
+			});
+		} else {
+			if (!oRequestSync) {
+				oRequestSync = createRequest(ai_bAsync);
+			}
+			oRequestSync.send({
+				url: ai_sUrl,
+				data: sParams
+			});
+		}
+	}
+	return {
+		sendSync: function (ai_sUrl, ai_saParams) {
+			send(false, false, ai_sUrl, ai_saParams);
+		},
+		sendAsync: function (ai_sUrl, ai_saParams) {
+			send(false, true, ai_sUrl, ai_saParams);
+		},
+		getResponse: function () {
+			return sResponse;
+		},
+		sendSyncJSON: function (ai_sUrl, ai_saParams) {
+			send(true, false, ai_sUrl, ai_saParams);
+		},
+		sendAsyncJSON: function (ai_sUrl, ai_saParams) {
+			send(true, true, ai_sUrl, ai_saParams);
+		},
+		getResponseJSON: function () {
+			return oResponseJSON;
+		}
+	};
+}
+();
+Meta4.IE6 = (Browser.Engine.name == 'trident' && Browser.Engine.version == '4');
+window.addEvent('domready', function () {
+	var oBody = $('allbody');
+	if (oBody) {
+		oBody.addEvent('keydown',function (ev) {
+				if (ev.key == 'f5' && (!ev.control)) {
+					ev.preventDefault();
+					Meta4.frameBody.refresh();
+				}
+			});
+		oBody.addEvent('click', function (ev) {
+				Meta4.menu.interceptEvent(ev);
+			}
+		);
+	}
+	$('showMenu').addEvent('click', function (ev) {
+		Meta4.portal.toggleMenu(ev);
+	});
+	$('hideMenu').addEvent('click', function (ev) {
+		Meta4.portal.toggleMenu(ev);
+	});
+	window.addEvent('unload', function (ev) {
+		Meta4.frameBody.setEventTakenCareOf();
+	});
+});
+function isIE6() {
+	if (Meta4.IE6) {
+		var oColimgs = $$('img');
+		var i = 0;
+		for (i = 0; i < oColimgs.length; i++) {
+			if (oColimgs[i].src && oColimgs[i].src.substring(oColimgs[i].src.length - 3) == 'png') {
+				oColimgs[i].src = oColimgs[i].src.substring(0, oColimgs[i].src.length - 3) + 'gif'
+			};
+			if (oColimgs[i].m4SrcHot && oColimgs[i].m4SrcHot.substring(oColimgs[i].m4SrcHot.length - 3) == 'png') {
+				oColimgs[i].m4SrcHot = oColimgs[i].m4SrcHot.substring(0, oColimgs[i].m4SrcHot.length - 3) + 'gif'
+			};
+			if (oColimgs[i].m4SrcNormal && oColimgs[i].m4SrcNormal.substring(oColimgs[i].m4SrcNormal.length - 3) == 'png') {
+				oColimgs[i].m4SrcNormal = oColimgs[i].m4SrcNormal.substring(0, oColimgs[i].m4SrcNormal.length - 3) + 'gif'
+			};
+		}
+	}
+}
diff --git a/SSE/m4custom/CCL/mss_g2/espanol/mss_g2_p2_val.jsp b/SSE/m4custom/CCL/mss_g2/espanol/mss_g2_p2_val.jsp
new file mode 100644
index 00000000..fb17079c
--- /dev/null
+++ b/SSE/m4custom/CCL/mss_g2/espanol/mss_g2_p2_val.jsp
@@ -0,0 +1,267 @@
+<%@ include file="../../sse_generico/sse_generico_taglib.jsp" %>
+<!DOCTYPE html 
+     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
+    "DTD/xhtml1-strict.dtd">
+<html>
+<head><%@ include file="../../sse_generico/sse_generico_taglib_2.jsp" %>
+<link href="/css/estilo_mss.css" type="text/css" rel="stylesheet" />
+<script type="text/javascript" src="/libreria/funciones_sse_val1.js"></script>
+<script type="text/Javascript" src="/libreria/funciones_sse.js"></script>
+<%@ include file="../../mss_generico/english/menu_mss.jsp" %>	
+<%@ include file="../../sse_g2/sse_payment_data_trans.jsp" %>
+<title><%=g2_paymentdata.getProperty("Label.otherPaymentDataVal")%></title>
+<%
+String estado = request.getParameter("estado");
+String zfiltro = request.getParameter("zfiltro");
+String zinicios = request.getParameter("zinicios");
+String znivel = request.getParameter("znivel");
+if ((estado==null)||(estado.equals(""))){estado="0";}
+if ((zfiltro==null)|| (""==zfiltro)){zfiltro = "Todos";} 
+if ((zinicios==null)||(zinicios.equals(""))){zinicios = "1";}
+if ((znivel==null)||(znivel.equals(""))){ znivel = "1";}
+%>
+<script type="text/javascript">
+function filtrar(){
+	var valor =m4select("filtro","prueba","value");
+	var nivel =m4select("nivel","prueba","value");
+	m4valor("oculto","zfiltro",valor,"set");
+	m4valor("oculto","znivel",nivel,"set");
+	oculto.submit();
+}
+function m4enviar(){
+	if (typeof(document.forms['a0']) != "undefined"){
+		var cadena="";
+		var URL = "{TAG=SSE_OTHER_PDATA";
+		var numregistros = parseInt(document.forms['a0'].elements[1].name);
+		cadena = cadena + URL;
+		for (var i = 0; i < numregistros; i++){
+			var formulario = "b" + i;
+			if (document.forms[formulario].elements[0].checked == true){
+				var formulario1 = "a" + i;
+				cadena = cadena + "{" + document.forms[formulario1].elements[1].value + "*" + "ACC=ACEPTAR";
+				cadena = cadena + document.forms[formulario1].elements[0].value;
+			} 
+			if (document.forms[formulario].elements[1].checked == true){
+				var formulario1 = "a" + i;
+				cadena = cadena + "{" + document.forms[formulario1].elements[1].value + "*" + "ACC=CANCELAR";
+				cadena = cadena + document.forms[formulario1].elements[0].value;
+				var formulario2 = "c" + i;
+				cadena = cadena + "{" +document.forms[formulario1].elements[1].value + "*" + "MOTIVO_ACCION=" + document.forms[formulario2].elements[0].value;
+			}
+		}
+		document.forms["envio"].elements["param"].value=cadena;
+		document.forms["envio"].elements["TAG"].value="SSE_OTHER_PDATA";
+		document.forms["envio"].submit();
+	}
+}
+</script>
+</head>
+<body>
+<%@ include file="../../mss_generico/english/mssgenerico_menusup.jsp" %>
+<%@ include file="../../sse_generico/english/generico_links.jsp" %>
+
+<%
+   String zsubsesion = "SSE_OTHER_PDATA";
+   String zmeta4object = "SSE_OTHER_PDATA";
+   String znodo = "SSE_OTHER_PDATA";
+   String ztipocarga = "SSE";
+   String zventanas = "4";
+   int zvuelta = 2;
+   String zdireccion = "/mss_g2/mss_g2_p1_val.jsp";
+   String zestado="21";
+   int zregistroinicial = Integer.valueOf(zinicios).intValue();
+   zregistroinicial = zregistroinicial - 1;
+   int zventana  = Integer.valueOf(zventanas).intValue();
+   int zregistrofinal = zregistroinicial + zventana - 1;
+   
+// No se modifica en general.
+
+   String zoutputdef = zsubsesion + "!" + znodo + "[" + zregistroinicial + "-" + zregistrofinal + "]";
+   String zraiz = znodo + ":" + zsubsesion + "!" + znodo + ".";
+   String zmove =znodo + ":" +  znodo + "[" + zregistroinicial + "]";
+   String zcomun = znodo + ":" + zsubsesion + "!" + znodo + "[&VAR.m4lix]" + ".";
+
+   String znodolista = znodo + "_VAL";
+   String zoutputdeflista = zsubsesion + "!" + znodolista + "[*]";
+   String zmovelista = znodolista + ":" + znodolista + "[FIRST]";
+   String zraizlista = znodolista + ":" + zsubsesion + "!" + znodolista + ".";
+   String zcomunlista = znodolista + ":" + zsubsesion + "!" + znodolista + "[&VAR.m4lix]" + ".";
+   
+   String znodocom = "SSE_COMUNICACION";
+   String zoutputdefcom = zsubsesion + "!" + znodocom + "[*]";
+   
+// Metodo de carga del Meta4Object generico
+
+   String znodoprincipal = "SSE_PRINCIPAL";
+   String zmetodocarga = "CARGA:" + zsubsesion + "!" + znodoprincipal + ".CARGA";
+   
+// Items que vamos a cargar. Se deben anadir todos aquellos que se deseen visualizar
+
+   String zORDINAL = zcomun + "ORDINAL";
+   String zNACCION = zcomun + "N_ACCION";   
+   String zNOMBREEMPLEADO = zcomun + "NOMBRE_EMPLEADO";
+   String zNOMBREPERSON = zraiz + "NOMBRE_PERSON";
+  
+   String zfecinicio = zcomun +"SCO_DT_START";
+   String zfecfin = zcomun +"SCO_DT_END";
+   
+   String zidbanco = zcomun + "SCO_ID_BANK_BRANCH";
+   String ziddc = zcomun + "SSP_DC";
+   String zidcuenta = zcomun + "SCO_ACCOUNT_NUMBER";
+   String zNcurr = zcomun + "NM_CURRENCY";
+   String zNformapago = zcomun + "SCO_NM_PAYM_TYPE";  
+   String zNformula = zcomun + "SCO_NM_PAYMFORMULA";
+   String zentitled = zcomun + "SCO_ENTITLED";
+   String zvalor = zcomun + "SCO_VALUE";
+   String zSCO_NM_PAYM_TYPE = zcomun + "SCO_NM_PAYM_TYPE";
+   
+   
+   String zNOMBREEMPLEADOlista =  zcomunlista + "NOMBRE_EMPLEADO";
+   String zSTDIDPERSON = zcomunlista + "STD_ID_PERSON";      
+   
+  
+%>
+<m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
+<m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
+<% try {
+	    M4Operations m = new M4Operations(request); 
+	    
+	    m.setItem(zsubsesion,znodoprincipal,"","NIVEL",znivel);
+	    m.setItem(zsubsesion,znodo,"","ID_PERSON",zfiltro);
+	      
+		} catch(Exception e) {}
+%>
+<m4:exec m4method="<%=zmetodocarga%>"><m4:param name="TIPO_CARGA" value="<%=ztipocarga%>"/></m4:exec>
+<m4:outputdef m4alias="<%=znodolista%>"><m4:param name="m4name0" value="<%=zoutputdeflista%>"/></m4:outputdef>
+<m4:outputdef m4alias="<%=znodocom%>"><m4:param name="m4name0" value="<%=zoutputdefcom%>"/></m4:outputdef >
+<m4:outputdef m4alias="<%=znodo%>" ><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
+<m4:endjob/>
+<m4:move><m4:param name="<%=zsubsesion%>" value="<%=zmove%>"/></m4:move>
+<m4:move><m4:param name="<%=zsubsesion%>" value="<%=zmovelista%>"/></m4:move>
+<%
+	int  zcounti  = 0;
+	int  zcountilista  = 0;
+	int  zcount  = 0;	
+	try {
+		M4Operations m = new M4Operations(request);
+		zcounti = m.getCountInClient(znodo,zsubsesion,znodo);
+		zcountilista = m.getCountInClient(znodolista,zsubsesion,znodolista);
+		zcount = m.getCount(znodo,zsubsesion,znodo);
+	} catch(Exception e) {}
+	String	zcountv = String.valueOf(zcounti);
+	String	zcountvlista = String.valueOf(zcountilista);
+%>
+<table width="100%" cellspacing="0">
+<tr><td class="titulofuncional" colspan="2"><%=g2_paymentdata.getProperty("Label.otherPaymentDataValTitle")%></td></tr>
+<tr>
+	<td><img alt="<%=g2_paymentdata.getProperty("Label.otherPaymentDataValTitle")%>" src="/iconos/noname_valida_beneficiarios_86_100.gif" width="86" height="100" /></td>
+	<td><div class="descripcionfuncional"><%=g2_paymentdata.getProperty("Label.otherPaymentDataValdesc")%></div></td>
+</tr>
+</table>
+<%@ include file="../../mss_generico/english/mssgenerico_filtro_val.jsp" %>
+<br />
+<form action="/servlet/CheckSecurity/JSP/mss_g2/mss_g2_p2_val.jsp?estado=21" method="post" name="oculto" id="oculto">
+<input type="hidden" id="zfiltro" name="zfiltro"  value="<%=zfiltro%>" />
+<input type="hidden" id="zfiltroemp" name="znivel"  value="<%=znivel%>" />
+<input type="hidden" id="zinicios" name="zinicios"  value="" />
+</form>
+<% if (zcounti > 0) {
+String zregistroinicials = String.valueOf(zregistroinicial);
+String zregistrofinals = String.valueOf(zregistroinicial + zcounti - 1);
+String zposicions = "0";
+int zposicion = 0; %>	
+<table width="100%" cellspacing="0">
+	<tr><td class = "tablaestadosceldatitulo" colspan="2"><%=Tran.getProperty("Labelmss.Pendientes")%></td></tr>
+	<m4:loop from="<%=zregistroinicials%>" to="<%=zregistrofinals%>">
+	<%	zposicions = m4lix;
+		zposicion = Integer.valueOf(zposicions).intValue();
+		zposicion = zposicion - zregistroinicial;%>
+	<tr>
+
+		<td class="fuentecampo">
+			<table cellspacing="0" width="100%">
+				<tr><td class="fuentecamponombre" colspan="4">&nbsp;<m4:item m4name="<%=zNOMBREEMPLEADO%>" htmlsafe="true"/>&nbsp;<%=Tran.getProperty("Labelmss.Solicita")%>&nbsp;<m4:item m4name="<%=zNACCION%>" htmlsafe="true"/></td></tr>	
+
+				<tr>
+					<td class="fuentecamponombre" colspan="4"><br/></td>
+				</tr>
+				<tr>
+					<td class = "fuentecampo" >&nbsp;<m4:label  m4name="<%=zfecinicio%>" htmlsafe="true" />:&nbsp;</td>
+					<td class = "fuentevalor" colspan="2"><m4:item m4name="<%=zfecinicio%>" htmlsafe="true"/></td>
+				</tr>
+				<tr>
+					<td class = "fuentecampo" >&nbsp;<m4:label  m4name="<%=zfecfin%>" htmlsafe="true" />:&nbsp;</td>
+					<td class = "fuentevalor" colspan="2"><m4:item m4name="<%=zfecfin%>" htmlsafe="true"/></td>
+				</tr>
+					<tr>
+					<td class = "fuentecampo" >&nbsp;<m4:label  m4name="<%=zentitled%>" htmlsafe="true" />:&nbsp;</td>
+					<td class = "fuentevalor" colspan="2"><m4:item m4name="<%=zentitled%>" htmlsafe="true"/></td>
+				</tr>
+				<tr>
+					<td class = "fuentecampo" >&nbsp;<m4:label  m4name="<%=zvalor%>" htmlsafe="true" />:&nbsp;</td>
+					<td class = "fuentevalor" colspan="2"><m4:item m4name="<%=zvalor%>" htmlsafe="true"/></td>
+				</tr>
+				
+				<tr>
+					<td class = "fuentecampo" >&nbsp;<m4:label  m4name="<%=zSCO_NM_PAYM_TYPE%>" htmlsafe="true" />:&nbsp;</td>
+					<td class = "fuentevalor" colspan="2"><m4:item m4name="<%=zSCO_NM_PAYM_TYPE%>" htmlsafe="true"/></td>
+				</tr>
+	
+				<tr>
+					<td class="fuentecampo" colspan="4">
+					<form name="a<%=zposicion%>" id="a<%=zposicion%>">
+						&nbsp;<input id="ocultos" name="ocultos" type="hidden" value="{<m4:item m4name="<%=zORDINAL%>" htmlsafe="true"/>*REC=<m4:item m4name="<%=zORDINAL%>" htmlsafe="true"/>{<m4:item m4name="<%=zORDINAL%>" htmlsafe="true"/>*NOD=SSE_OTHER_PDATA{<m4:item m4name="<%=zORDINAL%>" htmlsafe="true"/>*NIVEL_ACEPTADO=<%=znivel%>" />
+								 <input size="1" name="<%=zcountv%>" type="hidden" value="<m4:item m4name="<%=zORDINAL%>" htmlsafe="true"/>" />
+					</form></td>	
+				</tr>
+				</table>
+			</td>
+			<td class="fuentecampo">
+				<form name="b<%=zposicion%>" id="b<%=zposicion%>">
+				<table cellspacing="0">
+				<tr>
+					<td class="fuentecampo">
+						<input title="<%=Tran.getProperty("Labelmss.Aceptarlabel")%>" id="ac<%=zposicion%>" name="ac<%=zposicion%>" type="checkbox" value="T" onclick="validar(this,document.b<%=zposicion%>.ca<%=zposicion%>)" />
+						<%=Tran.getProperty("Labelmss.Aceptar")%>
+					</td>
+				</tr>
+				<tr>
+					<td class="fuentecampo">
+						<input title="<%=Tran.getProperty("Labelmss.Cancelarlabel")%>"  id="ca<%=zposicion%>" name="ca<%=zposicion%>" type="checkbox" value="T" onclick="validar(this,document.b<%=zposicion%>.ac<%=zposicion%>)" />
+						<%=Tran.getProperty("Labelmss.Cancelar")%>
+					</td>
+				</tr>
+				</table>
+				</form>
+			</td>
+		</tr>
+		<tr>
+			<td class="fuentecampo" colspan="2">
+				<%=Tran.getProperty("Labelmss.CancelarReason")%>			
+				<form name="c<%=zposicion%>" id="c<%=zposicion%>">
+				<input size="48" title="<%=Tran.getProperty("Labelmss.CancelarReasonlabel")%>" id="mo<%=zposicion%>" name="mo<%=zposicion%>" type="text" maxlength="60" />
+				</form>
+			</td>
+		</tr>
+		<tr><td class="separadorlinea" colspan="2"><hr /></td></tr>
+		</m4:loop>
+		<form id="envio" name="envio" action="/servlet/CheckSecurity/JSP/sse_generico/generico_actualizar_multipeticiones.jsp" method="post">
+		<input type="hidden" id="param" name="param" value="" />
+		<input type="hidden" id="TAG" name="TAG" value="" />
+		</form>
+			</table>
+	</td>
+</tr>
+</table>
+<%@include file="../../sse_generico/english/generico_ventanas_post.jsp"%>
+<%}else{%>	
+<div class="fuentenodatos" ><%=Tran.getProperty("Label.NoDataFound7")%></div>
+<br /> <br /> 
+<%}%>		
+<m4:endpage/>
+<%@ include file="../../mss_generico/english/mssgenerico_disclaimer.jsp" %>
+</div>
+</body>
+</html>
+
+
diff --git a/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101.jsp b/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101.jsp
index 14d2626e..645f4cc0 100644
--- a/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101.jsp
+++ b/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101.jsp
@@ -123,7 +123,7 @@ response.setDateHeader ("Expires", 0); //prevents caching at the proxy server
             valor_empl = "00" + valor_empl;
         }
 
-        String rutaBase = "E:\\Meta4\\M4ESS\\ESSMSS\\Certific\\";
+        String rutaBase = "E:\\Meta4\\M4WS\\SSE\\Certific\\";
         String ruta = rutaBase + valor_legal + "\\" + valor_empl + ".1887.HTM";
         File fichero=new File(ruta);
         
diff --git a/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101b.jsp b/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101b.jsp
index 5f4a956d..57491414 100644
--- a/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101b.jsp
+++ b/SSE/m4custom/CCL/sse_g2/espanol/sse_g2_p101b.jsp
@@ -6,6 +6,7 @@ response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http:/www.w3.org/TR/REC_html40/loose.DTD">
 <HTML>
     <HEAD>
+        <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
         <TITLE>Mi certificado anual</TITLE>
 
         <script LANGUAGE="JavaScript">
@@ -54,9 +55,22 @@ response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
         <style type="text/css" media="print"> 
             div.page {  
                 writing-mode: tb-rl; 
-                height: 80%; 
-                margin: 1% 0%; 
-            } 
+                height: 80%;
+                margin: 1% 0%;
+            }
+            div#imprimir {
+                display: none;
+            }
+            body{
+                width:95%;
+                height:80%;
+            }
+            .Disclaimer{
+                border:0;
+            }
+            @page{
+                size: A4 landscape;
+            }
         </style> 
         <style type="text/css"> 
             table { 
@@ -89,7 +103,7 @@ String valor_empl  = request.getParameter("zidempl");
             valor_empl = "00" + valor_empl;
         }
 
-String rutaBase = "E:\\Meta4\\M4ESS\\ESSMSS\\Certific\\";
+String rutaBase = "E:\\Meta4\\M4WS\\SSE\\Certific\\";
 
 String ruta = rutaBase + valor_legal + "\\" + valor_empl + ".1887.HTM";
 File fichero=new File(ruta);
diff --git a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body.jsp b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body.jsp
index 394c27fa..c1c42649 100644
--- a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body.jsp
+++ b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body.jsp
@@ -130,12 +130,12 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="0" colspan="5">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvalute"item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvalute" item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 
 <m4:item   m4varname="zFecEval" item="SCO_EVALUAT_DATE" htmlsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20150326.jsp b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20150326.jsp
index 90b97f51..9a354169 100644
--- a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20150326.jsp
+++ b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20150326.jsp
@@ -103,12 +103,12 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="0">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvalute"item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvalute" item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 
 <m4:item   m4varname="zFecEval" item="SCO_EVALUAT_DATE" htmlsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20170314.jsp b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20170314.jsp
index c62797e0..ff9b72a2 100644
--- a/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20170314.jsp
+++ b/SSE/m4custom/CCL/sse_g3/ccl_autoevaluacion_filter_body_v20170314.jsp
@@ -122,12 +122,12 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="0" colspan="4">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvalute"item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvalute" item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 
 <m4:item   m4varname="zFecEval" item="SCO_EVALUAT_DATE" htmlsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/ccl_evaluator_val.jsp b/SSE/m4custom/CCL/sse_g3/ccl_evaluator_val.jsp
index eae2f0f5..f594e2ed 100644
--- a/SSE/m4custom/CCL/sse_g3/ccl_evaluator_val.jsp
+++ b/SSE/m4custom/CCL/sse_g3/ccl_evaluator_val.jsp
@@ -274,7 +274,7 @@ if ((zfiltroevaluate==null)|| (""==zfiltroevaluate)){zfiltroevaluate = "";}
 <m4:dataloop outputdef="<%=znodo%>">
 <m4:current m4varname="zcurrent" outputdef="<%=znodo%>"/>
 <m4:item  m4varname="zIdPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item  m4varname="zDtStartProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item  m4varname="zDtStartProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
 <m4:item  m4varname="zEvaluator" item="STD_ID_PERSON" htmlsafe="true" outputdef="<%=znodo%>"/>
 <m4:item  m4varname="zResp1" item="STD_ID_PERSON_RESP" htmlsafe="true" outputdef="<%=znodo%>"/>
 <m4:item  m4varname="zResp2" item="STD_ID_PERSON_RESP2" htmlsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/ccl_definir_criterios.jsp b/SSE/m4custom/CCL/sse_g3/espanol/ccl_definir_criterios.jsp
index 62ba352d..b6b7b538 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/ccl_definir_criterios.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/ccl_definir_criterios.jsp
@@ -156,11 +156,11 @@ String zSCO_DT_START_PROC_ANT="";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="0">
 <m4:dataloop outputdef="<%=znodo%>">
-	<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-	<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-	<m4:item   m4varname="zIDEvalute"item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
-	<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-	<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+	<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+	<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+	<m4:item   m4varname="zIDEvalute" item="SCO_ID_HR" htmlsafe="true" outputdef="<%=znodo%>"/>
+	<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+	<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 	<%if (((zIDPlan.equals(zSCO_ID_EVAL_PLAN_ANT)==false) || (zDtStarProc.equals(zSCO_DT_START_PROC_ANT)==false) ) ){
 		zSCO_ID_EVAL_PLAN_ANT=zIDPlan;
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter.jsp b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter.jsp
index e2c6860c..e684cd25 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter.jsp
@@ -188,11 +188,11 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="1">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 <m4:item   m4varname="vSCO_ID_HR" item="SCO_ID_HR" jsafe="true" outputdef="<%=znodo%>"/>
 <m4:item   m4varname="vSCO_OR_HR_ROLE" item="SCO_OR_HR_ROLE" jsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_V20170322.jsp b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_V20170322.jsp
index 26b49ea0..a95bacc1 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_V20170322.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_V20170322.jsp
@@ -175,11 +175,11 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="1">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 <m4:item   m4varname="vSCO_ID_HR" item="SCO_ID_HR" jsafe="true" outputdef="<%=znodo%>"/>
 <m4:item   m4varname="vSCO_OR_HR_ROLE" item="SCO_OR_HR_ROLE" jsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_v20160218.jsp b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_v20160218.jsp
index bed2b6d1..c4eb7225 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_v20160218.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_v20160218.jsp
@@ -175,11 +175,11 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="0">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 <m4:item   m4varname="vSCO_ID_HR" item="SCO_ID_HR" jsafe="true" outputdef="<%=znodo%>"/>
 <m4:item   m4varname="vSCO_OR_HR_ROLE" item="SCO_OR_HR_ROLE" jsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_vPrevia.jsp b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_vPrevia.jsp
index e2c6860c..e684cd25 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_vPrevia.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/ccl_evaluacion_filter_vPrevia.jsp
@@ -188,11 +188,11 @@ String zNavegation="0";
 %>	
 <table class = "tablaestadosceldatitulo" width="100%" cellspacing="0" border="1">
 <m4:dataloop outputdef="<%=znodo%>">
-<m4:item   m4varname="zIDPlan"item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zDtStarProc"item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zIDEvaluator"item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zPpal"item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
-<m4:item   m4varname="zNotes"item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDPlan" item="SCO_ID_EVAL_PLAN" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zDtStarProc" item="SCO_DT_START_PROC" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zIDEvaluator" item="SCO_ID_EVALUATOR" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zPpal" item="SCO_EVALUATION_DEF" htmlsafe="true" outputdef="<%=znodo%>"/>
+<m4:item   m4varname="zNotes" item="SCO_CK_NOTES" htmlsafe="true" outputdef="<%=znodo%>"/>
 
 <m4:item   m4varname="vSCO_ID_HR" item="SCO_ID_HR" jsafe="true" outputdef="<%=znodo%>"/>
 <m4:item   m4varname="vSCO_OR_HR_ROLE" item="SCO_OR_HR_ROLE" jsafe="true" outputdef="<%=znodo%>"/>
diff --git a/SSE/m4custom/CCL/sse_g3/espanol/sse_g3_p0.jsp b/SSE/m4custom/CCL/sse_g3/espanol/sse_g3_p0.jsp
index 43aabc59..cface960 100644
--- a/SSE/m4custom/CCL/sse_g3/espanol/sse_g3_p0.jsp
+++ b/SSE/m4custom/CCL/sse_g3/espanol/sse_g3_p0.jsp
@@ -71,7 +71,7 @@ if ((zinicios==null)||(zinicios.equals(""))){zinicios = "1";}
 <tr>
 	<td><img src="/iconos/noname_puesto_181_125.gif" width="115" height="100" alt="Historial de puestos"title="Historial de puestos" /></td>
 	<td>
-	<div class="fuentedescripcion">Consultaff tu historial de puestos, para ver la descripci&oacute;n de cada puesto sit&uacute;ate sobre el nombre del mismo.</div>
+	<div class="fuentedescripcion">Consulta tu historial de puestos, para ver la descripci&oacute;n de cada puesto sit&uacute;ate sobre el nombre del mismo.</div>
 	<ul class="listaenlace">
 	<li><a class="enlacefuncional" tabindex="1" title="Ir a mi puesto de trabajo" href="/servlet/CheckSecurity/JSP/sse_g3/sse_g3_menu.jsp?estado=3">Mi puesto de trabajo</a></li>
 	</ul>
diff --git a/SSE/m4custom/CCL/sse_g4/espanol/sse_g4_p3.jsp b/SSE/m4custom/CCL/sse_g4/espanol/sse_g4_p3.jsp
new file mode 100644
index 00000000..7ff95f5e
--- /dev/null
+++ b/SSE/m4custom/CCL/sse_g4/espanol/sse_g4_p3.jsp
@@ -0,0 +1,144 @@
+<%@ taglib uri="M4Tags" prefix="m4" %><%@ page import="java.io.*, java.util.*, java.net.*" %>
+<!DOCTYPE html 
+     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
+    "DTD/xhtml1-transitional.dtd">
+<html>
+<head><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
+<title>Calendario de festivos</title>
+<link href="/css/estilo_sse.css" type="text/css" rel="stylesheet" />
+<script type="text/javascript" src="/libreria/funciones_sse.js"></script>
+<%@ include file="../../sse_generico/espanol/menu_ess.jsp" %>
+<%@ include file="../../sse_generico/espanol/sse_lang_in.jsp" %>
+<script type="text/javascript" src="/libreria/clasecalendario.js"></script>
+<script type="text/javascript" src="/libreria/dom1.js"></script>
+<script type="text/javascript" language="Javascript1.2">
+fecha_actual = new Date();
+var mes = fecha_actual.getMonth();
+var anio = fecha_actual.getFullYear();
+omes0 = new clasecalendario("omes0",0,anio,"hidden",false,0,10);
+omes1 = new clasecalendario("omes1",1,anio,"hidden",false,34,10);
+omes2 = new clasecalendario("omes2",2,anio,"hidden",false,68,10);
+omes3 = new clasecalendario("omes3",3,anio,"hidden",false,0,54);
+omes4 = new clasecalendario("omes4",4,anio,"hidden",false,34,54);
+omes5 = new clasecalendario("omes5",5,anio,"hidden",false,68,54);
+omes6 = new clasecalendario("omes6",6,anio,"hidden",false,68,54);
+omes7 = new clasecalendario("omes7",7,anio,"hidden",false,68,54);
+omes8 = new clasecalendario("omes8",8,anio,"hidden",false,68,54);
+omes9 = new clasecalendario("omes9",9,anio,"hidden",false,68,54);
+omes10 = new clasecalendario("omes10",10,anio,"hidden",false,68,54);
+omes11 = new clasecalendario("omes11",11,anio,"hidden",false,68,54);
+omes12 = new clasecalendario("omes12",12,anio+1,"hidden",false,68,54);
+</script> 
+</head>
+<body style="height:300px">
+
+<%@ include file="../../sse_generico/espanol/generico_menusup.jsp" %>
+<%@ include file="../../sse_generico/espanol/generico_links.jsp" %>
+<%
+   String zsubsesion = "SSE_CARGA_FESTIVOS";
+   String zmeta4object = "SSE_CARGA_FESTIVOS";
+   String znodo = "SSE_FESTIVOS";
+   String zlectura = zsubsesion  + "!" + znodo;
+   String zraiz = zsubsesion  + "!" + znodo + ".";
+   String zmetodocarga =zsubsesion  + "!SSE_FESTIVOS.CARGA";
+   String zoutputdef = zsubsesion + "!" + znodo + "[*]";
+   String zf0 ="";
+   String zf1 ="";
+   String zf2 ="";
+   String zf3 ="";
+   String zf4 ="";
+   String zf5 ="";
+   String zf6 ="";
+   String zf7 ="";
+   String zf8 ="";
+   String zf9 ="";
+   String zf10 ="";
+   String zf11 ="";
+   String zf12 ="";
+%>
+<m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
+<m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
+<m4:exec m4method="<%=zmetodocarga%>"/>
+<m4:outputdef><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
+<m4:endjob/>
+<%
+	try {
+	  	M4Operations m = new M4Operations(request);
+		zf0= m.getItem("",zmeta4object,znodo,"","ENERO"); 
+		zf1 = m.getItem("",zmeta4object,znodo,"","FEBRERO");
+		zf2 = m.getItem("",zmeta4object,znodo,"","MARZO");
+		zf3 = m.getItem("",zmeta4object,znodo,"","ABRIL");
+		zf4 = m.getItem("",zmeta4object,znodo,"","MAYO");
+		zf5 = m.getItem("",zmeta4object,znodo,"","JUNIO");
+		zf6 = m.getItem("",zmeta4object,znodo,"","JULIO");
+		zf7 = m.getItem("",zmeta4object,znodo,"","AGOSTO");
+		zf8 = m.getItem("",zmeta4object,znodo,"","SEPTIEMBRE");
+		zf9 = m.getItem("",zmeta4object,znodo,"","OCTUBRE");
+		zf10 = m.getItem("",zmeta4object,znodo,"","NOVIEMBRE");
+		zf11 = m.getItem("",zmeta4object,znodo,"","DICIEMBRE");
+        zf12 = m.getItem("",zmeta4object,znodo,"","NAVIDAD");
+	} catch(Exception e) {}
+%>
+<script type="text/javascript">
+omes0.festivos = new Array(<%=zf0%>);
+omes1.festivos = new Array(<%=zf1%>);
+omes2.festivos = new Array(<%=zf2%>);
+omes3.festivos = new Array(<%=zf3%>);
+omes4.festivos = new Array(<%=zf4%>);
+omes5.festivos = new Array(<%=zf5%>);
+omes6.festivos = new Array(<%=zf6%>);
+omes7.festivos = new Array(<%=zf7%>);
+omes8.festivos = new Array(<%=zf8%>);
+omes9.festivos = new Array(<%=zf9%>);
+omes10.festivos = new Array(<%=zf10%>);
+omes11.festivos = new Array(<%=zf11%>);
+omes12.festivos = new Array(<%=zf12%>);
+var coleccionmeses = new Array();
+coleccionmeses[0] = omes0;
+coleccionmeses[1] = omes1;
+coleccionmeses[2] = omes2;
+coleccionmeses[3] = omes3;
+coleccionmeses[4] = omes4;
+coleccionmeses[5] = omes5;
+coleccionmeses[6] = omes6;
+coleccionmeses[7] = omes7;
+coleccionmeses[8] = omes8;
+coleccionmeses[9] = omes9;
+coleccionmeses[10] = omes10;
+coleccionmeses[11] = omes11;
+coleccionmeses[12] = omes12;
+function buscar(cadena){
+	var re = /,/;
+	var r = cadena.search(re);
+	return(r);
+}
+function mostrarcalendarios(paso,mes,pos,coleccionobj){
+if ((paso == 0) || (mes == 13)){
+	return;
+}else{
+	coleccionobj[mes].pintacalendario();
+	coleccionobj[mes].mostrar(true);
+	mostrarcalendarios(paso - 1,mes + 1,pos +1,coleccionobj);
+	}
+}
+</script>
+<table width="100%" cellspacing = "0">
+<tr>
+	<td class="titulofuncional" colspan="2">Calendario de festivos</td>
+</tr>
+<tr>
+	<td><img src="/iconos/noname_calendario_123_100.gif" width="100" height="100" alt="Calendario de festivos"></td>
+	<td><div class="descripcionfuncional">Consulta los d&iacute;as festivos de tu centro de trabajo.</div></td>
+</tr>			
+</table>
+<script type="text/javascript">
+mostrarcalendarios(12,0,0,coleccionmeses);
+</script>
+</div>
+<div id="capa_disclaimer" style="position:relative; width:100%; height:100%; z-index:0"> 
+<%@ include file="../../sse_generico/espanol/generico_disclaimer.jsp"%>
+</div>
+<script type="text/javascript">
+</script>
+<m4:endpage/>
+</body>
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/sse_generico/espanol/calendario.jsp b/SSE/m4custom/CCL/sse_generico/espanol/calendario.jsp
new file mode 100644
index 00000000..5c9b2185
--- /dev/null
+++ b/SSE/m4custom/CCL/sse_generico/espanol/calendario.jsp
@@ -0,0 +1,364 @@
+<!DOCTYPE html>
+<HTML>
+	<HEAD>
+		<meta charset="windows-1252"/>
+      <TITLE>Calendario</TITLE>
+		<link href="/css/estilo_sse.css" type="text/css" rel="stylesheet" />
+       <script type="text/javascript" language="Javascript1.2" src="/libreria/funciones_sse.js"></script>
+       <script type="text/javascript"  language="Javascript1.2" src="/libreria/dom1.js"></script>
+       <script type="text/javascript" language="Javascript1.2">
+         // Initialize arrays.
+         var months = new Array("Enero", "Febrero", "Marzo",
+            "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre",
+            "Octubre", "Noviembre", "Diciembre");
+         var daysInMonth = new Array(31, 28, 31, 30, 31, 30, 31, 31,
+            30, 31, 30, 31);
+         var days = new Array("&nbspDomingo&nbsp", "&nbsp&nbsp&nbspLunes&nbsp&nbsp&nbsp", "&nbsp&nbspMartes&nbsp&nbsp&nbsp",
+            "Mi&eacute;rcoles", "&nbsp&nbspJueves&nbsp&nbsp&nbsp", "&nbsp&nbspViernes&nbsp&nbsp", "&nbsp&nbspS&aacute;bado&nbsp&nbsp");
+
+function getDays(month, year) {
+            // Test for leap year when February is selected.
+            if (1 == month)
+               return ((0 == year % 4) && (0 != (year % 100))) ||
+                  (0 == year % 400) ? 29 : 28;
+            else
+               return daysInMonth[month];
+ }
+function getToday() {
+         // Generate today's date.
+            this.now = new Date();
+            this.year = this.now.getFullYear(); 
+            this.month = this.now.getMonth();
+            this.day = this.now.getDate();
+	    // alert(this.now.getYear());
+}
+// Start with a calendar for today.
+         today = new getToday();
+function newCalendar(mover) {             
+            if (mover == "mas") {
+                if (document.forms["fselect"].elements["month"].selectedIndex != 11){
+                   document.forms["fselect"].elements["month"].selectedIndex = document.forms["fselect"].elements["month"].selectedIndex + 1;
+                }
+                else{				    
+                  //var yeartext = m4select("year","fyear","text");
+                  var objyear = document.forms["fselect"].elements["year"];
+                  var yeartext = objyear.options[objyear.selectedIndex].text;
+				    if (yeartext != 2100){
+				        document.forms["fselect"].elements["month"].selectedIndex = 0;
+				        document.forms["fselect"].elements["year"].selectedIndex = document.forms["fselect"].elements["year"].selectedIndex + 1;
+				     }				        
+					
+                 }	
+            }
+			if (mover == "menos") {
+			if (document.forms["fselect"].elements["month"].selectedIndex != 0){
+			    document.forms["fselect"].elements["month"].selectedIndex = document.forms["fselect"].elements["month"].selectedIndex - 1;
+			}			
+			else{
+				    //var yeartext = m4select("year","fyear","text");
+                    var objyear = document.forms["fselect"].elements["year"];
+                    var yeartext = objyear.options[objyear.selectedIndex].text;
+                    if (yeartext != 1900){
+				        document.forms["fselect"].elements["month"].selectedIndex = 11;
+				        document.forms["fselect"].elements["year"].selectedIndex = document.forms["fselect"].elements["year"].selectedIndex - 1;
+				    }				     				    
+			}
+			}
+			today = new getToday();
+                  //var yeartext = m4select("year","fyear","text");
+            var objyear = document.forms["fselect"].elements["year"];
+            var yeartext = objyear.options[objyear.selectedIndex].text;
+			var parseYear = parseInt(yeartext);
+            
+            var newCal = new Date(parseYear,document.forms["fselect"].elements["month"].selectedIndex, 1);
+            var Calanterior = new Date(parseYear,document.forms["fselect"].elements["month"].selectedIndex-1, 1);
+            var CalPosterior = new Date(parseYear,document.forms["fselect"].elements["month"].selectedIndex+1, 1);
+            
+			var day = -1;
+            var startDay = newCal.getDay();
+            var daily = 0;
+            
+			var numero = 1;
+			var numeropos = 1;
+			var num = 0;
+			
+			if ((today.year == newCal.getYear()) &&
+                  (today.month == newCal.getMonth()))
+               day = today.day;
+               
+            // Cache the table's tBody element named dayList.
+            
+            var tableCal = m4elemento("dayList");
+            
+			var intDaysInMonth =
+               getDays(newCal.getMonth(), newCal.getYear());
+			
+			var intDaysInMonthAnt =
+              getDays(Calanterior.getMonth(), Calanterior.getYear());
+			
+			var intDaysInMonthPos =
+               getDays(CalPosterior.getMonth(), CalPosterior.getYear());
+            
+			var numeroant = intDaysInMonthAnt - startDay + 1;
+		
+			
+			for (var intWeek = 0; intWeek < tableCal.rows.length;
+                  intWeek++)
+               for (var intDay = 0;
+                     intDay < tableCal.rows[intWeek].cells.length;
+                     intDay++) {
+				
+                  var cell = tableCal.rows[intWeek].cells[intDay];
+                 // Start counting days.
+                   if (intDay == startDay){ daily = 1};
+				 // Output the day number into the cell.
+                  cell.style.backgroundColor='#d3d3d3';
+				  //#E3E4FD
+				 //alert(intDaysInMonth);
+				 //alert(num-startDay +1);    
+					if ((num-startDay +1) > intDaysInMonth){
+                                if (cell.hasChildNodes() == true) {
+                                     cell.removeChild(cell.firstChild);
+                                 }
+                        var textocelda = document.createTextNode(numeropos++);
+                         cell.appendChild(textocelda);
+                         //cell.innerText = numeropos++;
+						cell.style.backgroundColor='white';
+				} 
+				 
+				if ((daily = 1) && (numero <= intDaysInMonth)){
+					if ((num-startDay) < 0 ){					 
+					 //cell.innerText = numeroant++;
+                           if (cell.hasChildNodes() == true) {                                              
+								cell.removeChild(cell.firstChild);
+                           }
+			               var textocelda = document.createTextNode(numeroant++);
+                           cell.appendChild(textocelda);
+                           cell.style.backgroundColor='#a9a9a9';
+                     }
+					 else{
+                         if (cell.hasChildNodes() == true) {
+                             cell.removeChild(cell.firstChild);
+                         }
+					var textocelda = document.createTextNode(numero++);
+                    cell.appendChild(textocelda);
+                    //cell.innerText = numero++;
+                }
+			}
+            num++;	 
+		}
+			
+			 // Para resaltar el dia actual.
+			for (intWeek = 0; intWeek < tableCal.rows.length; intWeek++)
+               for (intDay = 0; intDay < tableCal.rows[intWeek].cells.length; intDay++) {
+					cell = tableCal.rows[intWeek].cells[intDay];
+				   	cell.className = (cell.firstChild.nodeValue == today.day && cell.style.backgroundColor != '#a9a9a9' && cell.style.backgroundColor != 'white') ? "today" : "";
+                                        //alert(today.day);
+				}	
+}
+
+
+ var color = 'red';
+   
+function getDate(TD){
+            // This code executes when the user clicks on a day
+            // in the calendar
+
+    
+    var colecciontd = document.getElementsByTagName("TD");
+	for (var i = 0; i < colecciontd.length; i++){ 
+		if (colecciontd.item(i).style.backgroundColor == '#b0e0e6'){
+		colecciontd.item(i).style.backgroundColor = color;}
+		//'#E3E4FD'
+	}
+
+    color = TD.style.backgroundColor;
+    //alert("color: "+color);
+    TD.style.backgroundColor = '#b0e0e6';
+                                        var objanio = document.forms["fselect"].elements["year"];
+                                        var anio = objanio.options[objanio.selectedIndex].text;
+                                        //var anio = m4select("year","fyear","text");
+                                        var objmesnum = document.forms["fselect"].elements["month"];
+                                        var mesnumero = objmesnum.options[objmesnum.selectedIndex].index +1;
+                                        //alert("mesnumero: "+mesnumero);
+					if ('#a9a9a9' == color)                                         
+					{        
+                                                 var objmesnum = document.forms["fselect"].elements["month"];   
+                                                 var mesnumero = objmesnum.options[objmesnum.selectedIndex].index;                                     
+					 	 if (mesnumero != 0 ){
+                                                    var objmesnum = document.forms["fselect"].elements["month"]; 
+                                                    mesnumero = objmesnum.options[objmesnum.selectedIndex].index;  
+                                                    
+                                                 }
+                         else {
+					          mesnumero = '12';
+                                                  var objyear = document.forms["fselect"].elements["year"];
+                                                  var yeartext = objyear.options[objyear.selectedIndex].text;
+                                                  //var yeartext = m4select("year","fyear","text");
+                                                     if (yeartext != '1900'){  
+                                                          var objanio = document.forms["fselect"].elements["year"];
+                                                          var anio = objanio.options[objanio.selectedIndex-1].text;                                                       
+                                                          
+                                                          //alert("anio: "+anio);                              
+                                                     }        
+
+					                                                               
+					       
+					          else{
+					          anio = '1899';}
+					         }
+					//alert(mesnumero);
+					}
+
+					if ('white' == color)
+					{
+                                               var objmesnum = document.forms["fselect"].elements["month"];
+                                               var mesnumero = objmesnum.options[objmesnum.selectedIndex].index;
+                                               if (mesnumero < 10 ){
+                                                   var objmesnum = document.forms["fselect"].elements["month"];
+                                                   mesnumero = objmesnum.options[objmesnum.selectedIndex+2].index;
+                                                   //mesnumero = document.forms["fmonth"].elements["month"].options[mesnumero.selectedIndex + 2].index;                                                   
+                                               }           
+
+					 	
+					       
+					       else 
+                                                     if (mesnumero == 10){ 
+                                                     mesnumero = '12';}
+                                               else  {
+                                                       mesnumero = '1';
+                                                       var objyear = document.forms["fselect"].elements["year"];
+                                                       var yeartext = objyear.options[objyear.selectedIndex].text;
+                                                       //var yeartext = m4select("year","fyear","text");
+                                                       if (yeartext != '2100'){
+                                                          var objanio = document.forms["fselect"].elements["year"];
+                                                          var anio = objanio.options[objanio.selectedIndex + 1].text;
+                                                          //anio = document.forms["fyear"].elements["year"].options[anio.selectedIndex + 1].text;
+                                                          
+                                                       }
+                                                          
+                                                        else { anio = '2101'}
+                                               }
+                    }
+					//Correccion para el dia y mes con una sola cifra, ejemplo: 1=01
+					//var dianumero = event.srcElement.innerText;
+                                        var dianumero = TD.firstChild.nodeValue;
+                                        
+							if (dianumero.length != 2){
+							dianumero = '0' + dianumero;
+							}
+					
+					var strmesnumero = new String(mesnumero);
+								
+							//alert(strmesnumero);
+							if (strmesnumero.length != 2){
+							strmesnumero = '0' + strmesnumero;
+							}
+					
+					//Fin de la correccion para el dia y mes con una sola cifra
+					
+					//var fechasec = anio + "-" + strmesnumero + "-" + dianumero;
+					var fechasec = dianumero + "-" + strmesnumero + "-" + anio;
+	
+	document.forms["miform"].elements["fecha"].value = fechasec;
+	
+	if (!document.all){
+		if(!opener)opener=parent.window.opener;
+		opener.ventana.returnedValue = fechasec;
+		opener.ventana.m4returnfunc();
+	}
+}
+		function adios(){
+			if(!opener)opener=parent.window.opener;
+			opener.ventana.win.close();
+		}
+	</script>
+   </head>
+   <body onunload="window.returnValue = document.forms['miform'].elements['fecha'].value;">
+	<form id="miform" name="miform" action="">
+		<input type="hidden"  id = "fecha" name = "fecha" />          
+	</form>
+      <table WIDTH= 80% align= "center">
+	  <thead>
+            <tr class='colortabla' >
+               <td colspan=7 align="center">
+                  <!-- Month combo box -->
+                   <form id="fselect" name="fselect" action="" >                    
+                    <select id="month" onchange="newCalendar()" class="fuenteformulario100">
+                     <script type="text/javascript">
+                        // Output months into the document.
+                        // Select current month.
+                        for (var intLoop = 0; intLoop < months.length;
+                              intLoop++)
+                           document.write("<option class ='enlacefuncional'" +
+                              (today.month == intLoop ?
+                                 "Selected" : "") + ">" +
+                              months[intLoop]);
+                     </script>
+                  </select>                  
+                  <!-- Year combo box -->
+                  <select id="year" onchange="newCalendar()"  class="fuenteformulario100">
+                     <script type="text/javascript">
+                        // Output years into the document.
+                        // Select current year.
+                        for (var intLoop = 1900; intLoop < 2101;
+                              intLoop++)
+                           document.write("<option class ='enlacefuncional'" +
+                              (today.year == intLoop ?
+                                 "Selected" : "") + ">" +
+                              intLoop);
+                     </script>
+                  </select>                  
+                 </form>
+               </td>
+            </tr>
+         </thead>
+		</table> 
+      <table id="calendar" class='calendario'>
+         <thead>
+            <tr class="days">
+               <!-- Generate column for each day. -->
+               <script type="text/javascript">
+                  // Output days.
+                  for (var intLoop = 0; intLoop < days.length;
+                        intLoop++)
+                     document.write("<td class='enlacefuncional'>" + days[intLoop] + "</td>");
+               </script>
+            </tr>
+         </thead>
+         <tbody id="dayList" name="dayList" align="center"  ; ondblclick="adios()">
+            <!-- Generate grid for individual days. -->
+            <script type="text/javascript">              
+               for (var intWeeks = 0; intWeeks < 6; intWeeks++) {
+                 //alert("intWeeks: "+ intWeeks);
+                  document.write("<tr class='enlacefuncional'>");
+                  for (var intDays = 0; intDays < days.length;
+                        intDays++){  
+                        //alert("intDays: "+ intDays);                                            
+                     document.write("<td style='cursor: default'; onclick = 'getDate(this)' ></td>");
+                   }
+                      document.write("</tr>");                                 				
+                }             
+            </script>
+         </tbody>
+      </table>
+<table width="100%">
+	  <tr>
+		<td align="center">
+			<a onclick="javascript:newCalendar('menos');"><img alt="mes anterior" src="/iconos/icono_anterior_36_36.gif" height="36" width="36"></img></a>
+			<a onclick="javascript:adios();"><img src="/iconos/ok.gif" width="36" height="36" alt="Aceptar"></img></a>
+			<a onclick="javascript:newCalendar('mas');"><img alt="mes posterior" src="/iconos/icono_siguiente_ess_36_36.gif" height="36" width="36"></img></a>
+		</td>  
+      </tr>
+</table>
+  <script type="text/javascript">
+    newCalendar();
+  </script>
+  </BODY>
+</HTML>
+<%
+// Do not remove this comment - forces compilation in JRun 4.0!
+%>
+
+
+
diff --git a/SSE/m4custom/CCL/sse_generico/espanol/sgco_footer.jsp b/SSE/m4custom/CCL/sse_generico/espanol/sgco_footer.jsp
index 49ad9ba2..791785b3 100644
--- a/SSE/m4custom/CCL/sse_generico/espanol/sgco_footer.jsp
+++ b/SSE/m4custom/CCL/sse_generico/espanol/sgco_footer.jsp
@@ -1,19 +1,17 @@
 <%
 response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
 response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
+response.setDateHeader ("Expires", 0); //prevents caching at the proxy server 
+response.setHeader("Content-type","text/plain; charset=windows-1252");
+%><%@ taglib uri="M4Tags" prefix="m4"%>
 <m4:page subsessionid="SCCL_FOOTER">
     <m4:job>
         <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
         <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
         <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
     </m4:job>
-
 <div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
+    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/><br/>
     <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
 </div>
 </m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/sse_generico/espanol/ssco_portal.jsp b/SSE/m4custom/CCL/sse_generico/espanol/ssco_portal.jsp
new file mode 100644
index 00000000..77c7dd49
--- /dev/null
+++ b/SSE/m4custom/CCL/sse_generico/espanol/ssco_portal.jsp
@@ -0,0 +1,4 @@
+<!DOCTYPE html>
+<html lang="es">
+    <%@ include file="../ssco_portal.jsp"%>
+</html>
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/sse_generico/sgco_footer.jsp b/SSE/m4custom/CCL/sse_generico/sgco_footer.jsp
index 49ad9ba2..791785b3 100644
--- a/SSE/m4custom/CCL/sse_generico/sgco_footer.jsp
+++ b/SSE/m4custom/CCL/sse_generico/sgco_footer.jsp
@@ -1,19 +1,17 @@
 <%
 response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
 response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
+response.setDateHeader ("Expires", 0); //prevents caching at the proxy server 
+response.setHeader("Content-type","text/plain; charset=windows-1252");
+%><%@ taglib uri="M4Tags" prefix="m4"%>
 <m4:page subsessionid="SCCL_FOOTER">
     <m4:job>
         <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
         <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
         <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
     </m4:job>
-
 <div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
+    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/><br/>
     <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
 </div>
 </m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/sse_generico/sgco_portal.jsp b/SSE/m4custom/CCL/sse_generico/sgco_portal.jsp
index b2224394..13d7a82e 100644
--- a/SSE/m4custom/CCL/sse_generico/sgco_portal.jsp
+++ b/SSE/m4custom/CCL/sse_generico/sgco_portal.jsp
@@ -160,9 +160,9 @@ String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSub
 String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
 String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
 String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
+%>
+<head>
+    <meta charset="Windows-1252" />
     <link rel="stylesheet" href="/libreria/colorbox.css" />
     <script type="text/javascript" src="/libreria/jquery.min.js"></script>
     <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
@@ -170,17 +170,17 @@ String sMenuLeftContentClose = "</ul></div>";
 <%@ include file="/sse_generico/sse_generico_trans.jsp"%>
 	<script type="text/javascript" src="/libreria/mootools.js"></script>
 	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
+if (bESS) {
+	String estilo_sse = (String)session.getAttribute("estilo_sse");
+	if (estilo_sse == null || estilo_sse.equals("")) estilo_sse = "/css/estilo_sse.css";%>
+	<link href="<%=estilo_sse%>" type="text/css" rel="stylesheet" />
 	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
 } else {%>
   <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
+  <title><%=Tran.getProperty("Title.PortalMSS")%></title><%
+  }
+%><link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>
+  <link rel='stylesheet' type='text/css' href='/css/ccl_estilo_sse.css?v=<%= System.currentTimeMillis() %>'/>
 </head>
 <body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
 	//Begin: Portal page%>
@@ -191,18 +191,18 @@ if (bESS) {%>
 	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
 	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
 	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
     <div class="fill">
+		<div class="logo">
+			<div class="title"><%
+			if (bESS) {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
+				<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
+			} else {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
+				<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
+			}%>
+			</div>
+		</div>
         <div class="right">
             <div class="buttons">
               <%if (bESS) {%>
@@ -541,6 +541,4 @@ ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%=
     </script>
 
 </body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
+</m4:page><%oM4Log.debug("sgco_portal: exit");%>
\ No newline at end of file
diff --git a/SSE/m4custom/CCL/sse_generico/ssco_portal.jsp b/SSE/m4custom/CCL/sse_generico/ssco_portal.jsp
new file mode 100644
index 00000000..b9ce71a8
--- /dev/null
+++ b/SSE/m4custom/CCL/sse_generico/ssco_portal.jsp
@@ -0,0 +1 @@
+<%boolean bESS = true;%><%@ include file="sgco_portal.jsp"%>
\ No newline at end of file
diff --git a/SSE/m4custom/CVERDE/css/style_subportal_cv.css b/SSE/m4custom/CVERDE/css/style_subportal_cv.css
index a5d8b8b6..e7425527 100644
--- a/SSE/m4custom/CVERDE/css/style_subportal_cv.css
+++ b/SSE/m4custom/CVERDE/css/style_subportal_cv.css
@@ -398,3 +398,12 @@ A:hover
   width: 26px;
   height: 26px;
 }
+
+
+/*******************************/
+div{
+	float:left;
+}
+.portaltitle .divright{
+	float:right;
+}
\ No newline at end of file
diff --git a/SSE/m4custom/CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
index 929bad5b..f724f207 100644
--- a/SSE/m4custom/CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/CVERDE/sse_generico/espanol/ssco_portal.jsp b/SSE/m4custom/CVERDE/sse_generico/espanol/ssco_portal.jsp
index c4b138fb..fa35a1da 100644
--- a/SSE/m4custom/CVERDE/sse_generico/espanol/ssco_portal.jsp
+++ b/SSE/m4custom/CVERDE/sse_generico/espanol/ssco_portal.jsp
@@ -1,4 +1,6 @@
-<% 
+<!DOCTYPE html>
+<html lang="es"><% 
 	session.setAttribute("ccl_project","CVERDE");
 	session.setAttribute("estilo_sse","/css/estilo_sse_cv.css");
-%><%@ include file="../ssco_portal.jsp"%>
\ No newline at end of file
+%><%@ include file="../ssco_portal.jsp"%>
+</html>
\ No newline at end of file
diff --git a/SSE/m4custom/INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/INTERCOB/sse_generico/sgco_portal.jsp b/SSE/m4custom/INTERCOB/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/INTERCOB/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/INTERCOB/sse_generico/sgco_subportal.jsp b/SSE/m4custom/INTERCOB/sse_generico/sgco_subportal.jsp
index 23134b96..b055f254 100644
--- a/SSE/m4custom/INTERCOB/sse_generico/sgco_subportal.jsp
+++ b/SSE/m4custom/INTERCOB/sse_generico/sgco_subportal.jsp
@@ -1,9 +1,4 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml" ><%@ taglib uri = "M4Tags" prefix = "m4"%>
-<%@ page import = "java.io.*, java.util.*, java.net.*"%>
-<%@ page import = "com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%>
-<%@ page import = "com.meta4.common.utils.logsystem.M4i18nCategory"%>
-<%
+<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
 M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp"); 
 oM4Log.debug("sgco_subportal: entry");
 response.setDateHeader("Expires", -1);
@@ -160,7 +155,7 @@ String sSpListClose = "</ul>";
 String sSpBlockClose = "</div></div></div></div>";
 %>
   <head>
-    <meta http-equiv="X-UA-Compatible" content="IE=7" />
+    <meta charset="Windows-1252" />
     <meta http-equiv="cache-control" content="max-age=0" />
     <meta http-equiv="cache-control" content="no-cache" />
     <meta http-equiv="expires" content="0" />
diff --git a/SSE/m4custom/MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/MAICAO/sse_generico/sgco_portal.jsp b/SSE/m4custom/MAICAO/sse_generico/sgco_portal.jsp
index b2224394..288f9043 100644
--- a/SSE/m4custom/MAICAO/sse_generico/sgco_portal.jsp
+++ b/SSE/m4custom/MAICAO/sse_generico/sgco_portal.jsp
@@ -160,9 +160,9 @@ String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSub
 String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
 String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
 String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
+%>
+<head>
+    <meta charset="Windows-1252" />
     <link rel="stylesheet" href="/libreria/colorbox.css" />
     <script type="text/javascript" src="/libreria/jquery.min.js"></script>
     <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
@@ -170,17 +170,17 @@ String sMenuLeftContentClose = "</ul></div>";
 <%@ include file="/sse_generico/sse_generico_trans.jsp"%>
 	<script type="text/javascript" src="/libreria/mootools.js"></script>
 	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
+if (bESS) {
+	String estilo_sse = (String)session.getAttribute("estilo_sse");
+	if (estilo_sse == null || estilo_sse.equals("")) estilo_sse = "/css/estilo_sse.css";%>
+	<link href="<%=estilo_sse%>" type="text/css" rel="stylesheet" />
 	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
 } else {%>
   <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
+  <title><%=Tran.getProperty("Title.PortalMSS")%></title><%
+  }
+%><link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>
+  <link rel='stylesheet' type='text/css' href='/css/ccl_estilo_sse.css?v=<%= System.currentTimeMillis() %>'/>
 </head>
 <body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
 	//Begin: Portal page%>
@@ -191,18 +191,18 @@ if (bESS) {%>
 	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
 	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
 	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
     <div class="fill">
+		<div class="logo">
+			<div class="title"><%
+			if (bESS) {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
+				<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
+			} else {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
+				<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
+			}%>
+			</div>
+		</div>
         <div class="right">
             <div class="buttons">
               <%if (bESS) {%>
@@ -540,7 +540,5 @@ ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%=
                     
     </script>
 
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
+</body> 
+</m4:page><%oM4Log.debug("sgco_portal: exit");%>
\ No newline at end of file
diff --git a/SSE/m4custom/MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
index 4a3a7a9d..654c7bb0 100644
--- a/SSE/m4custom/MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -183,7 +183,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -209,7 +209,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/MINTLAB/sse_generico/sgco_portal.jsp b/SSE/m4custom/MINTLAB/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/MINTLAB/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_CEO/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_CEO/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/RP_CEO/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
index 929bad5b..f724f207 100644
--- a/SSE/m4custom/RP_CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_CVERDE/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_CVERDE/sse_generico/espanol/ssco_portal.jsp b/SSE/m4custom/RP_CVERDE/sse_generico/espanol/ssco_portal.jsp
index c4b138fb..76507381 100644
--- a/SSE/m4custom/RP_CVERDE/sse_generico/espanol/ssco_portal.jsp
+++ b/SSE/m4custom/RP_CVERDE/sse_generico/espanol/ssco_portal.jsp
@@ -1,4 +1,7 @@
-<% 
+<!DOCTYPE html>
+<html lang="es">
+    <% 
 	session.setAttribute("ccl_project","CVERDE");
 	session.setAttribute("estilo_sse","/css/estilo_sse_cv.css");
-%><%@ include file="../ssco_portal.jsp"%>
\ No newline at end of file
+%><%@ include file="../ssco_portal.jsp"%>
+</html>
\ No newline at end of file
diff --git a/SSE/m4custom/RP_INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/RP_INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_INTERCOB/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_INTERCOB/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_INTERCOB/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/RP_INTERCOB/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/RP_MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_MAICAO/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_MAICAO/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_MAICAO/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/RP_MAICAO/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
index 4a3a7a9d..654c7bb0 100644
--- a/SSE/m4custom/RP_MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_MINTLAB/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -183,7 +183,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -209,7 +209,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_MINTLAB/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_MINTLAB/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/RP_MINTLAB/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp b/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp b/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/RP_SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/RP_SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
index b6621bfc..f1b62c5f 100644
--- a/SSE/m4custom/RP_SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -183,7 +183,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -209,7 +209,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_SOCOFAR/sse_generico/sgco_portal.jsp b/SSE/m4custom/RP_SOCOFAR/sse_generico/sgco_portal.jsp
index 8f53de87..499b2847 100644
--- a/SSE/m4custom/RP_SOCOFAR/sse_generico/sgco_portal.jsp
+++ b/SSE/m4custom/RP_SOCOFAR/sse_generico/sgco_portal.jsp
@@ -1,5 +1,3 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
-<html xmlns="http://www.w3.org/1999/xhtml" > 
 <%@ taglib uri="M4Tags" prefix="m4"%>
 <%@ page import="java.io.*, java.util.*, java.net.*"%>
 <%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%>
@@ -187,9 +185,8 @@ String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuL
 String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
 String sMenuLeftContentClose = "</ul></div>";
 %>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
 <head>
+    <meta charset="Windows-1252" />						   
 <%@ include file="/sse_generico/generico_formats.jsp" %>
 <%@ include file="/sse_generico/sse_generico_trans.jsp"%>
 <script type="text/javascript" src="/libreria/mootools.js"></script>
@@ -200,11 +197,9 @@ String sMenuLeftContentClose = "</ul></div>";
 <%} else {%>
   <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css"/>
   <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css'/>");}
-</script>
+<%}
+%><link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>
+  <link rel='stylesheet' type='text/css' href='/css/ccl_estilo_sse.css?v=<%= System.currentTimeMillis() %>'/>
 </head>
 <body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();">
 <%//Begin: Portal page%>
@@ -216,18 +211,18 @@ oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
 String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
 oM4Log.debug("  sUrlLogin: " + sUrlLogin);
 %>
-    <div class="logo">
-        <div class="title">
-<%if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-           <span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span>
-<%} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-           <span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span>
-<%}%>
-        </div>
-    </div>
     <div class="fill">
+		<div class="logo">
+			<div class="title">
+	<%if (bESS) {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
+			   <span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span>
+	<%} else {%>
+			   <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
+			   <span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span>
+	<%}%>
+			</div>
+		</div>
         <div class="right">
             <div class="buttons">
               <%if (bESS) {%>
@@ -420,6 +415,5 @@ session.setAttribute("avisoinsc","1");
 %>
 </body>
 
-</html>
 </m4:page><%oM4Log.debug("sgco_portal: exit");%>
  
\ No newline at end of file
diff --git a/SSE/m4custom/RP_SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/RP_SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/RP_TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/RP_TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/RP_TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/RP_TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp b/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/espanol/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp b/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp b/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/SERV_COMPARTIDOS/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/SER_ASES/sse_generico/espanol/sgco_footer.jsp b/SSE/m4custom/SER_ASES/sse_generico/espanol/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/SER_ASES/sse_generico/espanol/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/SER_ASES/sse_generico/sgco_footer.jsp b/SSE/m4custom/SER_ASES/sse_generico/sgco_footer.jsp
deleted file mode 100644
index 49ad9ba2..00000000
--- a/SSE/m4custom/SER_ASES/sse_generico/sgco_footer.jsp
+++ /dev/null
@@ -1,19 +0,0 @@
-<%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
-<m4:page subsessionid="SCCL_FOOTER">
-    <m4:job>
-        <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
-        <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
-        <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
-    </m4:job>
-
-<div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
-</div>
-</m4:page>
\ No newline at end of file
diff --git a/SSE/m4custom/SER_ASES/sse_generico/sgco_portal.jsp b/SSE/m4custom/SER_ASES/sse_generico/sgco_portal.jsp
deleted file mode 100644
index b2224394..00000000
--- a/SSE/m4custom/SER_ASES/sse_generico/sgco_portal.jsp
+++ /dev/null
@@ -1,546 +0,0 @@
-<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><%
-response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
-response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %><%
-M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
-oM4Log.debug("sgco_portal: entry");
-oM4Log.debug("  bESS: " + String.valueOf(bESS));
-response.setDateHeader("Expires", -1);
-String sEncoding = M4RequestEncoding.getAppEncoding(); 
-response.setContentType ("text/html; charset=" + sEncoding + "");
-M4SessionCl m4SessionCl = M4Context.getM4SessionCl(request);
-
-boolean bHasMSS = false;                        //controls visibility of button "Change to MSS"
-String sMenuLevel1 = null;
-String sFirstMenuOption = null;                 //null is a valid value for this variable!
-String sHomeMenuOption = null;                  //menu option used in home button
-String sSectionAux = null;                      //auxiliary sections to be excluded from menu
-String scIconPath = "/iconos/";
-if (bESS) {     //ESS
-    //The following code is only required in ESS (check if options of MSS available to show/hide button "Change to MSS").
-    M4Menu oM4Menu = (M4Menu)m4SessionCl.getObject("SCO_MENU");                                     //retrieve menu object
-    if (oM4Menu == null) {                                                                          //object not attached to session
-        oM4Log.debug("  sco_menu null; create and attach to session");
-        oM4Menu = new M4Menu(M4Context.getSession(request));                                        //create new object
-        m4SessionCl.putObject("SCO_MENU", oM4Menu);                                                 //attatch object to session
-    }
-    bHasMSS = oM4Menu.hasMss();                                                                     //controls visibility of button "Change to MSS"
-    oM4Log.debug("  bHasMSS: " + String.valueOf(bHasMSS));
-
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "ESS");
-    sMenuLevel1 = "SSCO_MENU";
-    sSectionAux = "SSCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_ESS");
-    M4Context.getSession(request).setProductID("ess");                      //set product id for pages that use this information to determin style sheet
-} else {        //MSS
-    m4SessionCl.putObject("SCO_ID_PRODUCT", "MSS");
-    sMenuLevel1 = "SMCO_MENU";
-    sSectionAux = "SMCO_AUX";
-    sFirstMenuOption = (String)m4SessionCl.getObject("SCO_CURRENT_URL_MSS");
-    M4Context.getSession(request).setProductID("mss");                      //set product id for pages that use this information to determin style sheet
-}
-oM4Log.debug("  sMenuLevel1: " + sMenuLevel1);
-oM4Log.debug("  sSectionAux: " + sSectionAux);
-oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-String sLastRequestUrl = (String)m4SessionCl.getObject("SCO_LAST_REQUEST_URL");
-oM4Log.debug("  sLastRequestUrl: " + sLastRequestUrl);
-if (sLastRequestUrl != null && sLastRequestUrl.equals(sFirstMenuOption)) {      //if url of last request equals first option, restore request attached to session
-    sFirstMenuOption = "/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp";
-    oM4Log.debug("  sFirstMenuOption changed to '/servlet/CheckSecurity/JSP/sse_generico/sgco_restore_request.jsp'");
-}
-String sMenuSearchCriterion = (String)m4SessionCl.getObject("SCO_SEARCH_CRITERION");                //null is a valid value for this variable!
-oM4Log.debug("  sMenuSearchCriterion: " + sMenuSearchCriterion);
-if (sMenuSearchCriterion == null) {sMenuSearchCriterion = "";}
-String sShowMenu = (String)m4SessionCl.getObject("SGCO_IND_SHOW_MENU");                             //null is a valid value for this variable!
-oM4Log.debug("  sShowMenu: " + sShowMenu);
-boolean bShowMenu = (sShowMenu == null || sShowMenu.equals("true"));                                //indicates that menu is visible
-oM4Log.debug("  bShowMenu: " + bShowMenu);
-boolean bUseFirstMenuOption = (sFirstMenuOption == null || sFirstMenuOption.equals(""));
-
-M4SessionCl oSession = M4Context.getM4SessionCl(request);
-String sNmPerson = oSession.getBagEntries("minombre");
-oM4Log.debug("  sNmPerson: " + sNmPerson);
-String sPerfilGestion = oSession.getBagEntries("perfilmss");
-oM4Log.debug("  sPerfilGestion: " + sPerfilGestion);
-
-//Menu
-String sSubSession = "SGCO_MENU";
-String sMeta4Object = "MENUS";
-String sNodeApi = "MENU_RECURSIVE";
-String sDataDefNode = sMeta4Object + "!" + sNodeApi;
-String sMethodApiLoad = sDataDefNode + ".SRTC_LOAD_MENU";
-String sMethodApiFilter = sDataDefNode + ".SRTC_FILTER_MENU";
-String sOutputDefApi = sDataDefNode + "[*]";
-
-String sMenuLevel0 = "SGCO_MENU";
-
-//Favourites
-String sFavM4Object = "SGCO_FAVOURITE";
-String sFavNodeApi = "SGCO_FAVOURITE";
-String sFavDataDefNode = sFavM4Object + "!" + sFavNodeApi;
-String sFavMethodApiLoad = sFavDataDefNode + ".SCO_LOAD";
-String sFavOutputDefApi = sFavDataDefNode + "[*]";
-
-//Filter menu options:
-// - options that belong to given tree (ESS or MSS)
-// - options that are at level 1 or higher (ignore level 0 which is ESS or MSS)
-// - options that belong to hidden sections (SSCO_AUX... or SMCO_AUX...) including hidden section.
-String sFilterMenu = "If SRTC_ID_ROOT_MENU = \"" + sMenuLevel1 + "\" and SRTC_LEVEL > 0 and IndexOf(ID_MENU, \"" + sSectionAux + "\", 0) <> 0 and IndexOf(ID_PARENT_MENU, \"" + sSectionAux + "\", 0) <> 0 Then Return(1)";
-String sFilterMenuId = sDataDefNode + ".Filter";%>
-<m4:page subsessionid="<%=sSubSession%>">
-<m4:job>
-    <m4:datadef m4name="<%=sMeta4Object%>" m4o="<%=sMeta4Object%>"/>
-    <m4:exec m4method="<%=sMethodApiLoad%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel0%>"/>
-    </m4:exec>
-    <m4:exec m4method="<%=sMethodApiFilter%>">
-        <m4:param name="ARG_SRTC_ID_MENU" value="<%=sMenuLevel1%>"/>
-    </m4:exec>
-    <m4:filter m4name="<%=sFilterMenuId%>" m4filter="<%=sFilterMenu%>"/>
-    <m4:outputdef m4alias="<%=sNodeApi%>"><m4:param name="M4NAME0" value="<%=sOutputDefApi%>"/></m4:outputdef>
-    <m4:removefilter m4name="<%=sFilterMenuId%>"/>
-    <m4:datadef m4name="<%=sFavM4Object%>" m4o="<%=sFavM4Object%>"/>
-    <m4:exec m4method="<%=sFavMethodApiLoad%>"></m4:exec>
-    <m4:outputdef m4alias="<%=sFavNodeApi%>"><m4:param name="M4NAME0" value="<%=sFavOutputDefApi%>"/></m4:outputdef>
-</m4:job><%
-int iCountOptions = 0;
-String sIterationsMenu = "0";
-int iCountFavourites = 0;
-String sIterationsFavourites = "0";
-try {
-    M4Operations oM4Operations = new M4Operations(request);
-    iCountOptions = oM4Operations.getCountInClient(sNodeApi, sMeta4Object, sNodeApi);
-    sIterationsMenu = String.valueOf(iCountOptions - 1);
-    iCountFavourites = oM4Operations.getCountInClient(sFavNodeApi, sFavM4Object, sFavNodeApi);
-    sIterationsFavourites = String.valueOf(iCountFavourites - 1);
-} catch(Exception e) {
-    iCountOptions = -1;
-    oM4Log.error("sgco_menu_p1", e);
-}
-oM4Log.debug("  iCountOptions: " + String.valueOf(iCountOptions));
-oM4Log.debug("  iCountFavourites: " + String.valueOf(iCountFavourites));
-/* Structure of menu
-[title w/o link
-<div class="title_1" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>       -> sMenuLeftTitleNoLinkL1
-] | [title with link
-<div class="title_1" onclick="Meta4.menu.navigate('sUrl');" title="sToolTip"><img src="sIcon"/><p class="title">sTitle</p></div>   -> sMenuLeftTitleLinkL1
-]
-<div class="content_iLevel"><ul>                                                                -> sMenuLeftContentOpenLn
-[ option with submenu
-  [ option without link
-    <li class="withSubMenu"><div class="withSubMenu"><span class="noLink" title="sToolTip">sTitle</span></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenNoLinkLn
-  ]|[ option with link
-    <li class="withSubMenu"><div class="withSubMenu"><a title="sToolTip" href="sUrl">sTitle</a></div><span class="title_iLevel closed"></span>  -> sMenuLeftLiSubOpenLinkLn
-  ]
-        <div class="content_iLevel"><ul>                                                        -> sMenuLeftContentOpenLn
-            <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                 -> sMenuLeftLiNoSub
-            ... -> More options at level 3
-        </ul></div></li>                                                                        -> sMenuLeftLiSubClose
-    ... -> More options at level 2
-]|[ option without submenu
-    <li><a title="sToolTip" href="sUrl">sTitle</a></li>                                         -> sMenuLeftLiNoSub
-    ... -> More options at level 2
-]
-  Favourite: Name plus icon to delete favourite
-    <div class="content_1"><ul id="menuLeftFavouritesUL">                                       -> sMenuLeftContentOpenFavourites
-        <li id="favouritesOrdinal"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" onclick="Meta4.menu.deleteFavourite(sOrdinal);" title="sToolTip"></span></div></li>  -> sMenuLeftLiFavourite
-  Favourite template: same as above but hidden
-<div id="favouriteItemTemplate" style="visibility: hidden; height: 0px;"><li id="favouriteLiTemplate"><div class="withSubMenu"><a title="sTitle" href="sUrl">sTitle</a><span class="delete" title="sGenericToolTip"></span></div></li></div>  -> sMenuLeftLiFavouriteTemplate
-</ul></div>                                                                                     -> sMenuLeftContentClose
-... -> More options at level 1
-*/
-String sMenuLeftTitleNoLinkL1 = "<div class=\"title_1\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftTitleLinkL1 = "<div class=\"title_1\" onclick=\"Meta4.menu.navigate('sUrl');\" title=\"sToolTip\"><img src=\"" + scIconPath + "sIcon\"/><p class=\"title\">sTitle</p></div>";
-String sMenuLeftContentOpenLn = "<div class=\"content_iLevel\"><ul>";
-String sMenuLeftLiSubOpenNoLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><span class=\"noLink\" title=\"sToolTip\">sTitle</span><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiSubOpenLinkLn = "<li class=\"withSubMenu\"><div class=\"withSubMenu\"><a title=\"sToolTip\" href=\"sUrl\">sTitle</a><span class=\"title_iLevel closed\"></span></div>";
-String sMenuLeftLiNoSub = "<li><a title=\"sToolTip\" href=\"sUrl\">sTitle</a></li>";
-String sMenuLeftLiSubClose = "</ul></div></li>";
-String sMenuLeftLiFavourite = "<li id=\"favouritesOrdinal\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" onclick=\"Meta4.menu.deleteFavourite(sOrdinal);\" title=\"sToolTip\"></span></div></li>";
-String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuLeftFavouritesUL\">";
-String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
-String sMenuLeftContentClose = "</ul></div>";
-%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
-<head> 
-    <link rel="stylesheet" href="/libreria/colorbox.css" />
-    <script type="text/javascript" src="/libreria/jquery.min.js"></script>
-    <script type="text/javascript" src="/libreria/jquery.colorbox-min.js"></script> 
-<%@ include file="/sse_generico/generico_formats.jsp" %>
-<%@ include file="/sse_generico/sse_generico_trans.jsp"%>
-	<script type="text/javascript" src="/libreria/mootools.js"></script>
-	<script type="text/javascript" src="/libreria/functions_portal.js"></script><%
-if (bESS) {%>
-	<%@ include file="../../sse_generico/estilo_sse.jsp" %>
-	<title><%=Tran.getProperty("Title.PortalESS")%></title><%
-} else {%>
-  <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css?v=<%= System.currentTimeMillis() %>"/>
-  <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-	<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>");}
-	</script>
-</head>
-<body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();"><%
-	//Begin: Portal page%>
-	<div class="scoPortalPage" id="portalPage"><%
-	//Begin: Page header%>
-	<div class="scoPageHeader" id="pageHeader"><%
-	int iLanguageID = M4Context.getSession(request).getLanguageID();                                    //2, 3, 4.... 8
-	oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
-	String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
-	oM4Log.debug("  sUrlLogin: " + sUrlLogin);%>
-    <div class="logo">
-		<div class="title"><%
-		if (bESS) {%>
-           <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span><%
-		} else {%>
-           <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
-			<span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span><%
-		}%>
-        </div>
-    </div>
-    <div class="fill">
-        <div class="right">
-            <div class="buttons">
-              <%if (bESS) {%>
-			  	<%if(sPerfilGestion.equals("1")==true){%>
-				<a href="/servlet/CheckSecurity/JSP/mss_generico/mssgenerico_pgestion.jsp" target="_blank"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="Perfil de Gesti√≥n" rel="Perfil de Gesti√≥n"/></span></a>
-				
-				<%}%>
-                <% if (bHasMSS) {%>
-				<a href="javascript:" onClick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_mss.png" m4SrcHot="/iconos/ic_header_mss_hot.png" m4SrcNormal="/iconos/ic_header_mss.png" onMouseOver="Meta4.header.iconHot(this);" onMouseOut="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.MSS.title")%>" rel="<%=Tran.getProperty("Button.MSS.toolTip")%>"/></span></a><%}%>
-              <%} else {%>
-                <a href="javascript:" onclick="Meta4.header.changePortal();return false;"><span><img src="/iconos/ic_header_ess.png" m4SrcHot="/iconos/ic_header_ess_hot.png" m4SrcNormal="/iconos/ic_header_ess.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.ESS.title")%>" rel="<%=Tran.getProperty("Button.ESS.toolTip")%>"/></span></a>
-              <%}%>
-                <a href="javascript:" onclick="Meta4.header.home();return false;"><span><img src="/iconos/ic_header_home.png" m4SrcHot="/iconos/ic_header_home_hot.png" m4SrcNormal="/iconos/ic_header_home.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Home.title")%>" rel="<%=Tran.getProperty("Button.Home.toolTip")%>"/></span></a>
-                <a href="javascript:" onclick="Meta4.header.whoIsWho();return false;"><span><img src="/iconos/ic_header_who_is_who.png" m4SrcHot="/iconos/ic_header_who_is_who_hot.png" m4SrcNormal="/iconos/ic_header_who_is_who.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.WhoIsWho.title")%>" rel="<%=Tran.getProperty("Button.WhoIsWho.toolTip")%>"/></span></a>
-                <!--a id="headerButtonAddFavourite" href="javascript:" onclick="Meta4.header.addFavourite();return false;"><span><img src="/iconos/ic_header_favourite.png"  m4SrcHot="/iconos/ic_header_favourite_hot.png" m4SrcNormal="/iconos/ic_header_favourite.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);"title="<%=Tran.getProperty("Button.AddFavorite.title")%>" rel="<%=Tran.getProperty("Button.AddFavorite.toolTip")%>"/></span></a-->
-                <a href="javascript:" onclick="Meta4.header.logout();return false;"><span><img src="/iconos/ic_header_disconnect.png" m4SrcHot="/iconos/ic_header_disconnect_hot.png" m4SrcNormal="/iconos/ic_header_disconnect.png" onmouseover="Meta4.header.iconHot(this);" onmouseout="Meta4.header.iconNormal(this);" title="<%=Tran.getProperty("Button.Disconnect.title")%>" rel="<%=Tran.getProperty("Button.Disconnect.toolTip")%>"/></span></a>
-            </div>
-        </div>
-    </div>
-    <div class="subline">
-        <span class="menuSwitchShow<%if (bShowMenu) out.print(" hidden");%>" id="showMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.showMenu.toolTip")%>"><%=Tran.getProperty("Button.showMenu.title")%></span>
-        <span class="menuSwitchHide<%if (!bShowMenu) out.print(" hidden");%>" id="hideMenu" onclick="Meta4.portal.toggleMenu();" title="<%=Tran.getProperty("Button.hideMenu.toolTip")%>"><%=Tran.getProperty("Button.hideMenu.title")%></span>
-        <span class="information"><%=sNmPerson%>&nbsp;-&nbsp;<%@ include file="sgco_date.jsp"%></span>
-    </div>
-    <div class="separator"></div>
-</div><%//End: Page header%>
-<div id="menuLeftWrapper" class="scoMenuLeftWrapper"<%if (!bShowMenu) out.print(" style=\"height: 0;\"");%>><div class="scoMenuLeft" id="menuLeft">
-<% //Start: Menu
-    String sLine = null;
-    String sAux = null;
-    Stack oLineClose = new Stack();               //LIFO
-    String sNmMenu, sToolTip, sUrl, sUrlAux, sLevel, sHasSubMenu, sIcon;
-    String sOrFavourite, sNmFavourite, sUrlFavourite;
-    boolean bHasSubMenu;
-    int iCurrentLevel, iPreviousLevel = 0;
-    if(iCountOptions > 0){
-        %><m4:loop from="0" to="<%=sIterationsMenu%>"><m4:item outputdef="<%=sNodeApi%>" item="TRANSLATED_MENU" record="<%=m4lix%>" var="sNmMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_MENU" record="<%=m4lix%>" var="sToolTip" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrl" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="N_HTTP" record="<%=m4lix%>" var="sUrlAux"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_LEVEL" record="<%=m4lix%>" var="sLevel" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="SRTC_IND_HAS_SUBMENU" record="<%=m4lix%>" var="sHasSubMenu" htmlsafe="true"/><m4:item outputdef="<%=sNodeApi%>" item="ICON" record="<%=m4lix%>" var="sIcon" htmlsafe="true"/><%
-            //Identify first menu option with url
-            if (sFirstMenuOption == null || sFirstMenuOption.equals("")) {
-                sFirstMenuOption = sUrl;
-                oM4Log.debug("  sFirstMenuOption: " + sFirstMenuOption);
-            }
-            //Identify first menu option with url to be used as Home
-            if (sHomeMenuOption == null || sHomeMenuOption.equals("")) {
-                sHomeMenuOption = sUrlAux;
-                oM4Log.debug("  sHomeMenuOption: " + sHomeMenuOption);
-            }
-            //Init variables for this iteration
-            iCurrentLevel = (int)Double.parseDouble(sLevel);
-            bHasSubMenu = ((int)Double.parseDouble(sHasSubMenu) == 1);
-            //Cloase tags if required
-            if (iCurrentLevel > iPreviousLevel) {
-                //Update previous level with current level if current level is higher
-                iPreviousLevel = iCurrentLevel;
-            } else if (iCurrentLevel < iPreviousLevel) {
-                //If current level is less than previous level, close tags have to be added.
-                //The corresponding tags are in the stack (LIFO).
-                do {
-                    if (!oLineClose.empty()) {
-                        //Push close tag into output stack
-                        out.println(oLineClose.pop());
-                    }
-                }
-                //Decrement level and continue loop until current level reached
-                while (--iPreviousLevel > iCurrentLevel);
-            }
-            //Add option depending on level
-            if (iCurrentLevel == 1) {    
-                //First level has different syntax than following levels
-                if (sUrl != null && sUrl != "") {
-                    sLine = sMenuLeftTitleLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                } else {
-                    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sIcon", sIcon);
-                }
-                sLine = sLine.replaceAll("sToolTip", sToolTip);
-                out.println(sLine);
-                if (!bHasSubMenu) {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                    sLine = sMenuLeftContentClose;
-                    out.println(sLine);
-                }
-                else {
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftContentClose);
-                }
-            } else {
-                if (bHasSubMenu) {
-                    if (sUrl != null && sUrl != "") {
-                        sLine = sMenuLeftLiSubOpenLinkLn.replaceAll("sToolTip", sToolTip);
-                        sLine = sLine.replaceAll("sUrl", sUrl);
-                    } else {
-                        sLine = sMenuLeftLiSubOpenNoLinkLn;
-                        sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    }
-                    sLine = sLine.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    oLineClose.push(sMenuLeftLiSubClose);
-                    sLine = sMenuLeftContentOpenLn.replaceAll("iLevel", sLevel.trim());
-                    out.println(sLine);
-                    //don't push sMenuLeftContentClose on stack because it is already included in sMenuLeftLiSubClose
-                } else {
-                    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sNmMenu);
-                    sLine = sLine.replaceAll("sToolTip", sToolTip);
-                    sLine = sLine.replaceAll("sUrl", sUrl);
-                    out.println(sLine);
-                }
-            }
-        %></m4:loop><%
-        //Empty stack (close tags)
-        while (!oLineClose.empty()) {
-            out.println(oLineClose.pop());
-        }
-    }
-// 20140526: se solicita ocultar men√∫ favoritos
-//    //Favourites
-//    //Title with link to Edit Favourites
-//    sAux = Tran.getProperty("favourites.title");
-//    sLine = sMenuLeftTitleNoLinkL1.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sIcon", "ic_menu_favourites.png");
-//    sAux = Tran.getProperty("favourites.toolTip");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    out.println(sLine);
-//    //First entry: Edit Favourites
-//    out.println(sMenuLeftContentOpenFavourites);
-//    sAux = Tran.getProperty("favourites.edit.title");
-//    sLine = sMenuLeftLiNoSub.replaceAll("sTitle", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//    sLine = sLine.replaceAll("sUrl", "/servlet/CheckSecurity/JSP/sse_g0/sse_g0_editar_links.jsp");
-//    out.println(sLine);
-//    if (iCountFavourites != 0) {                                                                    //loop through all favourites
-//        %><m4:loop from="0" to="<%=sIterationsFavourites%>"><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_NM_FAVOURITE" record="<%=m4lix%>" var="sNmFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_URL" record="<%=m4lix%>" var="sUrlFavourite" htmlsafe="true"/><m4:item outputdef="<%=sFavNodeApi%>" item="SCO_OR_FAVOURITE" record="<%=m4lix%>" var="sOrFavourite" htmlsafe="true"/><%
-//            sLine = sMenuLeftLiFavourite.replaceAll("sTitle", sNmFavourite);
-//            sLine = sLine.replaceAll("sUrl", sUrlFavourite);
-//            sLine = sLine.replaceAll("sOrdinal", sOrFavourite);
-//            sAux = Tran.getProperty("favourites.delete.toolTip");
-//            sLine = sLine.replaceAll("sToolTip", sAux != null ? sAux : "");
-//            out.println(sLine);
-//        %></m4:loop><%
-//    }
-//    out.println(sMenuLeftContentClose);
-    //Menus-search
-    %><div class="title_1" id="togglerMenuSearch" title="<%=Tran.getProperty("search.toolTip")%>"><img src="/iconos/ic_menu_search.png"/>
-    <form id="formMenuSearch" action="/servlet/CheckSecurity/JSP/sse_generico/sgco_menu_search_back.jsp" method="post">
-    <input class="search inactive" type="text" id="criterion" name="sCriterion" onclick="Meta4.menu.search.clear();" onblur="Meta4.menu.search.restore();" onkeyup="Meta4.menu.search.search();"/>
-    </form>
-    </div>
-    <div class="content_1" id="searchResults">
-    <ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>
-    </div><%
-    sAux = Tran.getProperty("favourites.delete.toolTip");
-    sLine = sMenuLeftLiFavouriteTemplate.replaceAll("sGenericToolTip", sAux != null ? sAux : "");
-    out.println(sLine);                                                                             //favourite item template (to add items in run-time)
-%>
-</div></div><%//End: Menu%>
-<script type="text/javascript">isIE6();</script>
-<div id="pageContentWrapper" class="contentWrapper"<%if (!bShowMenu) out.print(" style=\"margin-left: -10px;\"");%>><%//Begin: Page content wrapper%>
-<div id="pageBody" class="scoPageBody"><%//Begin: Page body%>
-<div id="pageBodyWait" class="scoSpinner"></div>
-<iframe id="pageBodyFrame" class="content" src="<%=sFirstMenuOption%>" frameborder=0 onload="Meta4.frameBody.afterLoad();"></iframe>
-</div><%//End: Page body%>
-<script type="text/javascript">
-    Meta4.portal.init($('portalPage'), $('menuLeftWrapper'), $('menuLeft'), $('pageContentWrapper'), '<%=sUrlLogin%>', <%=bESS%>);
-    Meta4.frameBody.init($('pageBodyWait'), $('pageBodyFrame'));
-    Meta4.menu.init($('pageBodyWait'), <%=bUseFirstMenuOption%>);<%//Init menu after iframe so that request of iframe can be processed and menu is initialized (accordions applied) before showing it.%>
-    Meta4.header.init('<%=sHomeMenuOption%>', $('headerButtonAddFavourite'));
-    Meta4.menu.search.init($('formMenuSearch'), $('criterion'), $('searchResults'), "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.unCookHTML(Tran.getProperty("search.initialString"))%>", "<ul><li><%=Tran.getProperty("search.info.minLength")%></li></ul>", "<ul><li><%=Tran.getProperty("search.info.noSearch")%></li></ul>", "<%=com.meta4.taglib.util.M4PresentationUtilTaglib.escape(sMenuSearchCriterion)%>");
-</script>
-<%--@ include file="sgco_footer.jsp"%>
-6scf <%= session.getId().hashCode() + "-" + session.getId() + " / "+ System.currentTimeMillis() %>
-<jsp: include page="sgco_footer.jsp" >
-    <jsp:param name="param1" value="<%= "xxx"+ System.currentTimeMillis() %>" />
-</jsp:include%--%>
-
-<script type="text/javascript">
-
-/***********************************************
-* Ajax Includes script- ¬© Dynamic Drive DHTML code library (www.dynamicdrive.com)
-* This notice MUST stay intact for legal use
-* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
-***********************************************/
-
-//To include a page, invoke ajaxinclude("afile.htm") in the BODY of page
-//Included file MUST be from the same domain as the page displaying it.
-
-var rootdomain="http://"+window.location.hostname
-
-function ajaxinclude(url) {
-page_request = false;
-if (window.XMLHttpRequest) // if Mozilla, Safari etc
-    page_request = new XMLHttpRequest()
-else if (window.ActiveXObject){ // if IE
-    try {
-        page_request = new ActiveXObject("Msxml2.XMLHTTP")
-    }catch (e){
-        try{
-            page_request = new ActiveXObject("Microsoft.XMLHTTP");
-        }catch (e){}
-    }
-}else return false;
-
-page_request.open('GET', url, false); //get page synchronously 
-page_request.send(null)
-writecontent(page_request)
-}
-
-function writecontent(page_request){
-    var vStatus = page_request.status;
-    var vText = page_request.responseText;
-    var vStatusText = page_request.statusText;
-    
-    if (window.location.href.indexOf("http")==-1 || vStatus ==200){
-        document.write(vText);
-    }else if(vStatus == 500){
-        document.write("Error 500: "+ vText + ": "+ vStatusText);
-    }else{
-        document.write("Error desconocido: "+ vStatus + " " + vStatusText);
-    }
-}
-</script>
-
-<script type="text/javascript">
-ajaxinclude("/servlet/CheckSecurity/JSP/sse_generico/sgco_footer.jsp?param1=<%= System.currentTimeMillis() %>");
-</script>
-</div><%//End: Page content wrapper%>
-</div><%//End: Portal page%>
-
-<script type=>
-        var idleTime = 0, MAX_IDLE_TIME = 180;
-        var ccl_openedWindows = new Array();
-        function setCookie(cname, cvalue, exdays) {
-            var d = new Date();
-            d.setTime(d.getTime() + (exdays*24*60*60*1000));
-            var expires = "expires="+d.toUTCString();
-            document.cookie = cname + "=" + cvalue + "; " + expires;
-        }
-        function getCookie(cname) {
-            var name = cname + "=";
-            var ca = document.cookie.split(';');
-            for(var i=0; i<ca.length; i++) {
-                var c = ca[i];
-                while (c.charAt(0)==' ') c = c.substring(1);
-                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
-            }
-            return "";
-        }
-        <%
-        String socofar_totem = (String)session.getAttribute("socofar_totem");
-        if (socofar_totem == null || socofar_totem.equals("")){
-            socofar_totem = "0";
-        } %>
-        
-        setCookie('socofar_totem','<%=socofar_totem%>',365);
-        
-        function resetInactivityTimer(){
-            if(idleTime > 0){
-                 idleTime = 0;
-             }
-        }
-        
-        function addEvent(evnt, elem, func) {
-           if (elem.addEventListener)  // W3C DOM
-              elem.addEventListener(evnt,func,false);
-           else if (elem.attachEvent) { // IE DOM
-              elem.attachEvent("on"+evnt, func);
-           }
-           else { // No much to do
-              elem[evnt] = func;
-           }
-        }
-        
-        
-        
-        function timerInactivityIncrement() {
-            idleTime = idleTime + 1;
-            if (idleTime >= MAX_IDLE_TIME) { // 1 minute
-                //document.location.href='sse_logout.jsp'
-                Meta4.header.logout();
-            }
-        }
-        
-        var isTotem = getCookie('socofar_totem');
-        //alert(isTotem);        
-        
-        if (isTotem == "1") {
-            try{
-                addEvent("mousemove"     , document, resetInactivityTimer);
-                addEvent("mousedown"     , document, resetInactivityTimer);
-                addEvent("keypress"      , document, resetInactivityTimer);
-                addEvent("DOMMouseScroll", document, resetInactivityTimer);
-                addEvent("mousewheel"    , document, resetInactivityTimer);
-                addEvent("touchstart"    , document, resetInactivityTimer);
-                addEvent("touchmove"     , document, resetInactivityTimer);
-                addEvent("MSPointerMove" , document, resetInactivityTimer);
-                addEvent("scroll"        , document, resetInactivityTimer);
-                
-                Meta4.header._logout = Meta4.header.logout;
-                Meta4.header.logout = function(){
-                    var v, n = ccl_openedWindows.length;
-                    //alert('ventanas abiertas: '+ n);
-                    for(var i = 0; i < n; i++){
-                        v = ccl_openedWindows.pop();
-                        //alert('cerrando ventana: '+ i + '; closed: '+ ((v && v.closed != null)?v.closed:'null') + '; '+ ((v && v.location)?v.location:'null'));
-                        try{
-                            if (v != null){ 
-                                v.close();
-                            }
-                        }catch(e){
-                            //alert('error al cerrar ventana. ' + (v && v.name && v.location)?v.name + v.location:'null'  + ': ' + e.message);
-                        }
-                    }
-                    Meta4.header._logout();
-                }
-            }catch(e){
-                alert('Error: '+ e.message);
-            }
-            
-            
-        
-            addEvent("load",window, function () {
-                //Increment the idle time counter every minute.
-                var idleInterval = setInterval(timerInactivityIncrement, 1000); // 5 secs                  
-            });
-        }        
-
-                    
-    </script>
-
-</body>
-</html>
-</m4:page><%oM4Log.debug("sgco_portal: exit");%>
-
diff --git a/SSE/m4custom/SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
index b6621bfc..f1b62c5f 100644
--- a/SSE/m4custom/SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/SOCOFAR/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -183,7 +183,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -209,7 +209,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/SOCOFAR/sse_generico/sgco_portal.jsp b/SSE/m4custom/SOCOFAR/sse_generico/sgco_portal.jsp
index 8f53de87..80622fd5 100644
--- a/SSE/m4custom/SOCOFAR/sse_generico/sgco_portal.jsp
+++ b/SSE/m4custom/SOCOFAR/sse_generico/sgco_portal.jsp
@@ -1,11 +1,4 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
-<html xmlns="http://www.w3.org/1999/xhtml" > 
-<%@ taglib uri="M4Tags" prefix="m4"%>
-<%@ page import="java.io.*, java.util.*, java.net.*"%>
-<%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%>
-<%@ page import="com.meta4.menu.*" %>
-<%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%>
-<% 
+<%@ taglib uri="M4Tags" prefix="m4"%><%@ page import="java.io.*, java.util.*, java.net.*"%><%@ page import="com.meta4.m4operations.*, com.meta4.session.*, com.meta4.utilities.*, com.meta4.configuration.*"%><%@ page import="com.meta4.menu.*" %><%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%><% 
 M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
 oM4Log.debug("sgco_portal: entry");
 oM4Log.debug("  bESS: " + String.valueOf(bESS));
@@ -187,9 +180,8 @@ String sMenuLeftContentOpenFavourites = "<div class=\"content_1\"><ul id=\"menuL
 String sMenuLeftLiFavouriteTemplate = "<div id=\"favouriteItemTemplate\" style=\"visibility: hidden; height: 0px;\"><li id=\"favouriteLiTemplate\"><div class=\"withSubMenu\"><a title=\"sTitle\" href=\"sUrl\">sTitle</a><span class=\"delete\" title=\"sGenericToolTip\"></span></div></li></div>";
 String sMenuLeftContentClose = "</ul></div>";
 %>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
-<html>
 <head>
+    <meta charset="Windows-1252" />
 <%@ include file="/sse_generico/generico_formats.jsp" %>
 <%@ include file="/sse_generico/sse_generico_trans.jsp"%>
 <script type="text/javascript" src="/libreria/mootools.js"></script>
@@ -200,11 +192,9 @@ String sMenuLeftContentClose = "</ul></div>";
 <%} else {%>
   <link rel="stylesheet" type="text/css" href="/css/estilo_mss.css"/>
   <title><%=Tran.getProperty("Title.PortalMSS")%></title>
-<%}%>
-<script type="text/javascript">
-  if (Meta4.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portalIE6.css'/>");}
-  else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_portal.css'/>");}
-</script>
+<%}
+%><link rel='stylesheet' type='text/css' href='/css/style_portal.css?v=<%= System.currentTimeMillis() %>'/>
+  <link rel='stylesheet' type='text/css' href='/css/ccl_estilo_sse.css?v=<%= System.currentTimeMillis() %>'/>
 </head>
 <body id="allbody" onresize="Meta4.frameBody.resize();" onclick="Meta4.menu.interceptEvent();">
 <%//Begin: Portal page%>
@@ -216,8 +206,9 @@ oM4Log.debug("  iLanguageID: " + String.valueOf(iLanguageID));
 String sUrlLogin = CheckConfig.setBadLoginLink(iLanguageID, CheckConfig.THCL);
 oM4Log.debug("  sUrlLogin: " + sUrlLogin);
 %>
-    <div class="logo">
-        <div class="title">
+    <div class="fill">
+		<div class="logo">
+			<div class="title">
 <%if (bESS) {%>
            <span class="maintitle"><%=Tran.getProperty("header.ESS.title")%></span>
            <span class="subtitle"><%=Tran.getProperty("header.ESS.subtitle")%></span>
@@ -225,9 +216,8 @@ oM4Log.debug("  sUrlLogin: " + sUrlLogin);
            <span class="maintitle"><%=Tran.getProperty("header.MSS.title")%></span>
            <span class="subtitle"><%=Tran.getProperty("header.MSS.subtitle")%></span>
 <%}%>
-        </div>
-    </div>
-    <div class="fill">
+			</div>
+		</div>
         <div class="right">
             <div class="buttons">
               <%if (bESS) {%>
@@ -419,7 +409,5 @@ session.setAttribute("avisoinsc","1");
 }
 %>
 </body>
-
-</html>
 </m4:page><%oM4Log.debug("sgco_portal: exit");%>
  
\ No newline at end of file
diff --git a/SSE/m4custom/SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/SOLVENTA/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/m4custom/TI_CORPORATIVO/mss_g4/espanol/mss_g4_p5.jsp b/SSE/m4custom/TI_CORPORATIVO/mss_g4/espanol/mss_g4_p5.jsp
index 84583d39..e54db284 100644
--- a/SSE/m4custom/TI_CORPORATIVO/mss_g4/espanol/mss_g4_p5.jsp
+++ b/SSE/m4custom/TI_CORPORATIVO/mss_g4/espanol/mss_g4_p5.jsp
@@ -4,7 +4,10 @@ response.setHeader("Pragma","no-cache"); //HTTP 1.0
 response.setDateHeader ("Expires", 0); //prevents caching at the proxy server
 %>
 <%@ taglib uri="M4Tags" prefix="m4" %>
-<%@ page import="java.io.*, java.util.*, java.net.*" %>
+<%@ page import="java.io.*, java.util.*, java.net.*, java.text.DecimalFormat" %>
+<!DOCTYPE html 
+     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
+    "DTD/xhtml1-transitional.dtd">
 <HTML>
 <HEAD>
 <TITLE>Recepci√≥n del comprobante de vacaciones</TITLE>
@@ -285,7 +288,9 @@ if (busqueda.equals("1") ) {
 	<td nowrap class="FuenteCampo" width="19%">Rut Funcionario</td>    
 	<td>&nbsp;	<input class="fuenteformulario" name="rut1" type="text" SIZE="10" maxlength="10" title="" onBlur="upper()" /> </td>
 	<td nowrap class="FuenteCampo" width="19%"></td>    
-	<td nowrap class="FuenteCampo">Fecha de inicio : <input class="fuenteformulario" type="text" name="FECHA1" id="FECHA1" title="Escribe la fecha de inicio" maxlength="10" size="10" tabindex="1" />&nbsp;<a href="javascript:m4calendario(m4objeto('FECHA1','paso'))" title="Escribe la fecha de inicio"tabindex="2"><img src="/iconos/icono_calendario_14_18.gif" width="14" height="18" alt="Escribe la fecha de inicio" /></a>
+	<td nowrap class="FuenteCampo">Fecha de inicio :
+	<td class="fuentecampo">
+	<input class="fuenteformulario" type="text" name="FECHA1" id="FECHA1" title="Escribe la fecha de inicio" maxlength="10" size="10" tabindex="1" />&nbsp;<a href="javascript:m4calendario(m4objeto('FECHA1','paso'))" title="Escribe la fecha de inicio"tabindex="2"><img src="/iconos/icono_calendario_14_18.gif" width="14" height="18" alt="Escribe la fecha de inicio" /></a>
 	</td>
 	 
 	<td width="19%">&nbsp;</td>       																					
diff --git a/SSE/m4custom/TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp b/SSE/m4custom/TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
index dec27209..575b2030 100644
--- a/SSE/m4custom/TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
+++ b/SSE/m4custom/TI_CORPORATIVO/sse_g2/espanol/sse_g2_p126_ce.jsp
@@ -4,7 +4,7 @@
     "DTD/xhtml1-transitional.dtd">
 <html>
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <title>Licencias m&eacute;dicas</title><%@ page  import="com.meta4.session.*, com.meta4.m4operations.*" %>
 <link href="/css/estilo_sse.css?c=<%= request.getSession().getId() %>" type="text/css" rel="stylesheet" />
 <script type="text/javascript" src="/libreria/funciones_sse.js"></script>
@@ -91,11 +91,11 @@ function comprobar()
 <m4:startpage m4task="<%=zsubsesion%>"/><m4:beginjob/>
 <m4:datadef m4o="<%=zmeta4object%>" m4name="<%=zsubsesion%>"/>
 <m4:exec m4method="<%=zmetodocarga%>">
-	<m4:param name="TIPO_CARGA" value="<%=request.getParameter("TIPO_CARGA")%>"/>
-	<m4:param name="CORREO" value="<%=request.getParameter("CORREO")%>"/>
-	<m4:param name="TELEFONO" value="<%=request.getParameter("TELEFONO")%>"/>
-	<m4:param name="CELULAR" value="<%=request.getParameter("CELULAR")%>"/>	
-	<m4:param name="KEYCONF" value="<%=request.getParameter("KEYCONF")%>"/>		
+	<m4:param name="TIPO_CARGA" value='<%=request.getParameter("TIPO_CARGA")%>'/>
+	<m4:param name="CORREO" value='<%=request.getParameter("CORREO")%>'/>
+	<m4:param name="TELEFONO" value='<%=request.getParameter("TELEFONO")%>'/>
+	<m4:param name="CELULAR" value='<%=request.getParameter("CELULAR")%>'/>	
+	<m4:param name="KEYCONF" value='<%=request.getParameter("KEYCONF")%>'/>		
 </m4:exec>
 
 <m4:outputdef m4alias="<%=znodo%>"><m4:param name="m4name0" value="<%=zoutputdef%>"/></m4:outputdef>
@@ -185,7 +185,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor">&nbsp;</td><td class="fuentevalor">&nbsp;</td>')
 			}			
@@ -211,7 +211,7 @@ function comprobar()
 				document.write ('<td class="fuentevalor2">&nbsp;<input type="checkbox" name="chkbox_confirmado" value="1" checked disabled></td>')
 			}
 			if (sConfirmado=='0' && sEstado=='1') {
-				document.write ('<form action="" name="frmconfirma"><td class="fuentevalor2"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '"</form>')
+				document.write ('<td class="fuentevalor2"><form action="" name="frmconfirma"><div align="center"><input class="fuenteformulario" type="text" id="KEY" name="KEY" size="5" maxlength="6" title="clave confirmacion" tabindex="1" ></div><input type="hidden" name="TIPO_CARGA" value="CONFIRMAR"><input type="hidden" name="KEYCONF" value="' + bdkey + '" /></form></td><TD class="fuentevalor2"><div align="center"><a title="Enviar" href="javascript:void comprobar();" tabindex="2"><img alt="Enviar"id="Enviar" src="/iconos/aceptado.gif"/></a></div></TD>')
 			}else{
 				document.write ('<td class="fuentevalor2">&nbsp;</td><td class="fuentevalor2">&nbsp;</td>')
 			}						
diff --git a/SSE/sse_generico/espanol/sgco_footer.jsp b/SSE/sse_generico/espanol/sgco_footer.jsp
index 49ad9ba2..791785b3 100644
--- a/SSE/sse_generico/espanol/sgco_footer.jsp
+++ b/SSE/sse_generico/espanol/sgco_footer.jsp
@@ -1,19 +1,17 @@
 <%
 response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
 response.setHeader("Pragma","no-cache"); //HTTP 1.0
-response.setDateHeader ("Expires", 0); //prevents caching at the proxy server %>
-<%@ taglib uri="M4Tags" prefix="m4"%>
-
+response.setDateHeader ("Expires", 0); //prevents caching at the proxy server 
+response.setHeader("Content-type","text/plain; charset=windows-1252");
+%><%@ taglib uri="M4Tags" prefix="m4"%>
 <m4:page subsessionid="SCCL_FOOTER">
     <m4:job>
         <m4:datadef m4o="SCCL_FOOTER" m4name="SCCL_FOOTER"/>
         <m4:exec m4method="CARGA:SCCL_FOOTER!SCCL_FOOTER.CARGA"></m4:exec>
         <m4:outputdef m4alias="SCCL_FOOTER" ><m4:param name="m4name0" value="SCCL_FOOTER!SCCL_FOOTER[*]"/></m4:outputdef>
     </m4:job>
-
 <div class="pageFooter">
-    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/>
-    <br/>
+    <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_1" htmlsafe="false"/><br/>
     <m4:item m4name="SCCL_FOOTER:SCCL_FOOTER!SCCL_FOOTER.FOOTER_2" htmlsafe="false"/>
 </div>
 </m4:page>
\ No newline at end of file
diff --git a/SSE/sse_generico/generico_login.jsp b/SSE/sse_generico/generico_login.jsp
index 03a45cf8..1ad2559a 100644
--- a/SSE/sse_generico/generico_login.jsp
+++ b/SSE/sse_generico/generico_login.jsp
@@ -9,10 +9,10 @@ if (sParams == null) {sParams = "";}
 response.setHeader("Pragma", "no-cache"); 
 response.setHeader("Cache-Control", "no-store"); 
 response.setDateHeader("Expires", -1); 
-response.setHeader("X-UA-Compatible", "IE=EmulateIE7");
 %><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" >
 <head>
+   <meta charset="Windows-1252" />
    <script type="text/javascript" src="/libreria/mootools.js"></script>
    <script type="text/javascript" src="/libreria/functions_m4ajax.js"></script>
    <script type="text/javascript" src="/libreria/functions_login.js"></script>
@@ -21,22 +21,10 @@ response.setHeader("X-UA-Compatible", "IE=EmulateIE7");
       m4Login.params = '<%=sParams%>';
       if (m4Login.IE6) {document.write("<link rel='stylesheet' type='text/css' href='/css/style_loginIE6.css'/>");}
       else {document.write("<link rel='stylesheet' type='text/css' href='/css/style_login.css'/>");}
-		
-		/*
-		function firstRun(){
-			if (navigator.appName != "Microsoft Internet Explorer"){
-				 var sInnerHTML="<div style='width:100%;height:100%;text-align:center;vertical-align:middle'><img src='/iconos/admiracion_grandeazul.gif' alt='Autoservicio del empleado Grupo Difarma.'/>";
-				 sInnerHTML += "<h3 align='center'>";
-				 sInnerHTML += "Navegador no soportado. Favor acceder con Internet Explorer versi√≥n 8 o superior."
-				 sInnerHTML += "</h3> <img src=/iconos/error.gif></img></div>";				 
-				 document.getElementsByTagName('body')[0].innerHTML = sInnerHTML;
-			}
-		}
-		firstRun();*/
    </script>
  <title>Autoservicio del Empleado</title>
 </head>
-<body onload="firstRun()">
+<body>
    <div class="body-content">
      <div class="loginheaderleft">
         <div id="employee" class="logintittle">
diff --git a/SSE/tctools/cpaction/ccl_shco_gen_bag_wz_cp.jsp b/SSE/tctools/cpaction/ccl_shco_gen_bag_wz_cp.jsp
index 207faf88..c317d3fb 100644
--- a/SSE/tctools/cpaction/ccl_shco_gen_bag_wz_cp.jsp
+++ b/SSE/tctools/cpaction/ccl_shco_gen_bag_wz_cp.jsp
@@ -191,7 +191,7 @@
 			 %>
 			   <tr>
 			       <td class="fuentelinkcampo" align="right" WIDTH="50%"><%=snombrecampo%></td>
-			       <td class="fuentelinkcampo" align="left" WIDTH="50%"><input id="<%=sidcampo%>" name="<%=sidcampo%>" maxlength="<%=sprecision%>" type="text" value=""></td>
+			       <td class="fuentelinkcampo" align="left" WIDTH="50%"><input id="<%=sidcampo%>" name="<%=sidcampo%>" maxlength="<%=sprecision%>" type="text" value="" placeholder="Formato: 12345678-9"></td>
 			   </tr>
 			 <%
 			}
diff --git a/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data.jsp b/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data.jsp
index a4a50682..aa6adc3c 100644
--- a/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data.jsp
+++ b/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data.jsp
@@ -1,17 +1,33 @@
 <%-- [=====================================================]   
              
-	@(#)FileVersion: 753.000.055
+	@(#)FileVersion: 815.001.006
 	@(#)FileDescription: Forgotten User/password   
 	@(#)CompanyName: Meta4 Spain, S.A.
-	@(#)LegalCopyright: (c)2011
-	@(#)ProductName: PeopleNet KSystem
-	@(#)ProductVersion: 7.1SP5
+	@(#)LegalCopyright: (c)2018
+	@(#)ProductName: PeopleNet
+	@(#)ProductVersion: 8.1SP5
 	@(#)InternalName: tc_login_wz_cp_send_data.jsp     
-	@(#)Date: 19/01/2009
+	@(#)Date: 10/05/2015
 
 [=====================================================] --%>
-<%
 
+<%@ page import="java.lang.*"%>
+<%@ page import="com.meta4.session.*"%>
+<%@ page import="com.meta4.taglib.util.*"%>
+<%@ page import="com.meta4.m4operations.*" %>
+<%@ page import="com.meta4.request.*"%>
+<%@ page import="com.meta4.common.utils.logsystem.M4i18nCategory"%>
+
+<% // 1 - headers: no cache, no clickjacking 
+   response.setHeader("Pragma", "no-cache"); 
+   response.setHeader("Cache-Control", "no-store"); 
+   response.setDateHeader("Expires", -1); 
+   response.setHeader("X-Frame-Options", "SAMEORIGIN"); 
+   
+   M4i18nCategory oM4Log = (M4i18nCategory) M4i18nCategory.getInstance("com.meta4.jsp");
+%>
+
+<% // 2 - read information passed 
   String sServerURL = null;
   String sHostName = request.getServerName() ; 
   String sPortName = new Integer( request.getServerPort() ).toString() ; 
@@ -20,28 +36,69 @@
   String sProtocol = "http";
 
   if ( isHttpSecure ) sProtocol = "https" ;
-  //sServerURL = sProtocol + "://" + sHostName + ":" + sPortName ;
-  //Pending C233093B166133
-  sServerURL = request.getParameter("SERVER_URL_P"); 
   
+  // Avoid SSL-ofloading misconfigurations
+  sServerURL = com.meta4.taglib.util.M4SafeRequest.getParameter(request, "SERVER_URL_P"); 
+  
+  // Avoid security fiddling with void parameters
+  if ((sServerURL==null)||(sServerURL.equals(""))){sServerURL = "http://localhost";}
 
-  String zlang = (String)session.getAttribute("LANG_TO_CHANGE_PASS");
-  if ((zlang==null)||(zlang.equals(""))){zlang = "2";}
-
-  String sUrlLoginComplete = (String)session.getAttribute("URL_COMPLETE");
-  String sRespValue = "-1";
-
+  // configurable values
+  String zlang = (String)session.getAttribute("LANG_TO_CHANGE_PASS"); 
   String zappprod = (String)session.getAttribute("LANG_TO_CHANGE_PASS_STYLE"); 
+  String sUrlLoginComplete = (String)session.getAttribute("URL_COMPLETE"); 
+    
+  if (zlang == null || zlang.equals("")) zlang = "2"; 
+  if (zappprod == null || zappprod.equals("") || zappprod.equals("ess")) 
+  {
+  	zappprod = M4ProductByThreadUpdater.getProductIDFromRequest(request);  
+  }
+  if (zappprod == null) zappprod = "ess"; 
+  
+  if (sUrlLoginComplete == null || sUrlLoginComplete.equals("")) sUrlLoginComplete =  "/";
+    
+  // The important part
+  String sRespValue = "-1";
   String sIdSocPass = (String)session.getAttribute("SOC_C_PASS");
 %>
-	
+   
+<% // 3 - remember the organization for the next time
+  if (sIdSocPass != null && !sIdSocPass.equals(""))
+  {  	
+	  com.meta4.utilities.UtilTaglet.generatePersistentCookie("M4_ORGANIZATION", sIdSocPass, response);	
+  }
+%>
 
-<%@ page import="com.meta4.m4operations.*" %>
-<%@ include file="/shco_g0/shco_gen_taglib.jsp" %>
+<% // 4 - read the token
+  String email = "";
+  String tks = com.meta4.taglib.util.M4SafeRequest.getParameter(request, "tks"); 
+  if (tks != null && !tks.equals(""))
+  {  	
+	  try 
+	  {
+		LinkedHashMap<String,String> theothermap = new LinkedHashMap<String,String>();
+		theothermap = com.meta4.common.cipher.M4CipherUtil.decryptSecretsMap(tks, sIdSocPass);
+		email = theothermap.get("email");
+	  } catch (Exception e){}
+  }
+%>
 
+
+<%@ include file="/shco_g0/shco_gen_taglib.jsp" %>
 <%@ include file="/shco_g0/shco_gen_lang.jsp" %>
 <%@ include file="/shco_g0/shco_login_box_trans.jsp" %>
 
+<script type="text/javascript">
+
+// Returns the cursor to the default pointer
+function cursor_clear() {
+	document.body.style.cursor = 'default';
+}
+</script>
+
+<%-- JavaScript user interface --%>
+<script type="text/javascript" language="Javascript1.5" src="/translations/tc_login_<%=zlanguser%>.js"></script>
+
 <%
   com.meta4.session.M4SessionManager oSessionManager = null;
   com.meta4.session.M4SessionCl oSesion = null;
@@ -49,13 +106,12 @@
 
   // esto establece una sesi√≥n con WEBADM.
   oSessionManager = com.meta4.session.M4BootstrapSession.establishBootstrapSession (zlang); 
-
-
   if (oSessionManager == null) 
   {
 	%>
 	<script type="text/javascript">
-		alert("<%=Tran_shco_login_box.getProperty("login.ErrorConnection")%>");
+		// alert("<%=Tran_shco_login_box.getProperty("login.ErrorConnection")%>");
+		alert(login_ErrorConnection);		
 		document.location.href="<%=sUrlLoginComplete%>";
 	</script>
 	<%	
@@ -81,16 +137,16 @@
 		// This is not null if it is a multitenancy environment
 		if ( sIdSocPass != null ) 
 		{
-	        	oOperationsCPass.createData(sIDChannel, sIDChannel, null);
+	        	oOperationsCPass.createData(sIDChannel, sIDChannel, true, null);
 	        }
 	        else
 	        {
 	        	// BF0180637
 	        	Hashtable htParamsOfCanal = new Hashtable(); 
-			htParamsOfCanal.put("ID_ORGANIZATION_TYPE", "0"); 
-			htParamsOfCanal.put("ID_ORGANIZATION", "" ); 
+				htParamsOfCanal.put("ID_ORGANIZATION_TYPE", "0"); 
+				htParamsOfCanal.put("ID_ORGANIZATION", "" ); 
 	
-			oOperationsCPass.createData(sIDChannel, sIDChannel, htParamsOfCanal); 
+				oOperationsCPass.createData(sIDChannel, sIDChannel, true, htParamsOfCanal); 
 	        }
 
 
@@ -108,21 +164,23 @@
 		oOperationsCPass.method(sIDMethod, sIDChannel, sIDNode, sIDMethod, htArgs);
 
 		oOperationsCPass.outputDef(sIDNode, sIDChannel + "!" + sIDNode + "[*]");
-                oOperationsCPass.endJob("");
+        oOperationsCPass.endJob("");
 
-         	String reg; 
+        String reg; 
 		String sidcampo="";
 		String sCampoValue = "";
 
-            	iTotRegCount = oOperationsCPass.getCountInClient(sIDNode, sIDChannel, sIDNode);
+        iTotRegCount = oOperationsCPass.getCountInClient(sIDNode, sIDChannel, sIDNode);
+		
 		String sArrayPosValue [] = new String[iTotRegCount];
 
 		for (int i=0; i<iTotRegCount; i++) 
 		{
            		reg = new Integer(i).toString();
-            	    	sidcampo = oOperationsCPass.getItem(sIDNode, sIDChannel, sIDNode, reg, "ID_FIELD");
-			sCampoValue = request.getParameter(sidcampo);
-			sArrayPosValue[i] = sCampoValue;
+            	sidcampo = oOperationsCPass.getItem(sIDNode, sIDChannel, sIDNode, reg, "ID_FIELD");
+				
+				sCampoValue = com.meta4.taglib.util.M4SafeRequest.getParameter(request, sidcampo);
+				sArrayPosValue[i] = sCampoValue;
 		}
 		oOperationsCPass.endTask();
 
@@ -141,12 +199,15 @@
 		oOperationsCPass.initTask(sIDChannel);	
 		oOperationsCPass.beginJob();
 		
+		oOperationsCPass.createData(sIDChannel, sIDChannel, false, null);
+		
 		Hashtable aPriorityParams = new Hashtable();
 		aPriorityParams.put("PATHESS", sServerURL);
 		aPriorityParams.put("LANG", zlang);
 		aPriorityParams.put("URL_COMPLETE", sUrlLoginComplete);
 		aPriorityParams.put("PRODUCT", zappprod);
-
+		aPriorityParams.put("EMAIL", email);
+		
 		oOperationsCPass.method(sIDMethodGen, sIDChannel, sIDNodeGen, sIDMethodGen, aPriorityParams);
 
 		oOperationsCPass.endJob("");
@@ -158,37 +219,38 @@
 
 		oOperationsCPass.endTask();
 		oOperationsCPass.logout();
-
+		
+	%>
+	<script type="text/javascript">
+		cursor_clear();
+	</script>
+	<%
+	
 		if (sRespValue.equals("2"))
 		{
-			%>
-			<script type="text/javascript">
-				alert("<%=Tran_shco_login_box.getProperty("login.UserHHRR")%>");
-				document.location.href="<%=sUrlLoginComplete%>";
-			</script>
-			<%
+			%><script type="text/javascript">alert(login_UserHHRR);
+			document.location.href="<%=sUrlLoginComplete%>";
+			</script><%
+		}
+		else if (sRespValue.equals("1"))
+		{
+			%><script type="text/javascript">alert(login_User);
+			document.location.href="<%=sUrlLoginComplete%>";
+			</script><%
+		}
+		else if (sRespValue.equals("-2"))
+		{
+			%><script type="text/javascript">alert(login_AmbiDataM);
+			document.location.href="<%=sUrlLoginComplete%>";
+			</script><%
 		}
 		else
 		{
-		  if (sRespValue.equals("1"))
-		  {
-			%>
-			<script type="text/javascript">
-				alert("<%=Tran_shco_login_box.getProperty("login.User")%>");
-				document.location.href="<%=sUrlLoginComplete%>";
-			</script>
-			<%
-		  }
-		  else
-		  {
-			%>
-			<script type="text/javascript">
-				alert("<%=Tran_shco_login_box.getProperty("login.NoDataM")%>");
-				document.location.href="<%=sUrlLoginComplete%>";
-			</script>
-			<%
-		  }
+			%><script type="text/javascript">alert(login_NoDataM);
+			document.location.href="<%=sUrlLoginComplete%>";
+			</script><%
 		}
+		
 	}
   }
 %>
diff --git a/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data_val.jsp b/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data_val.jsp
index b04ec4bf..26247d01 100644
--- a/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data_val.jsp
+++ b/SSE/tctools/cpaction/ccl_tc_login_wz_cp_send_data_val.jsp
@@ -42,6 +42,9 @@
 <%@ include file="/shco_g0/shco_gen_lang.jsp" %>
 <%@ include file="/shco_g0/shco_login_box_trans.jsp" %>
 
+<%-- JavaScript user interface --%>
+<script type="text/javascript" src="/translations/tc_login_<%=zlanguser%>.js"></script>
+
 <%
   com.meta4.session.M4SessionManager oSessionManager = null;
   com.meta4.session.M4SessionCl oSesion = null;
@@ -55,7 +58,8 @@
   {
 	%>
 	<script type="text/javascript">
-		alert("<%=Tran_shco_login_box.getProperty("login.ErrorConnection")%>");
+		// alert("<%=Tran_shco_login_box.getProperty("login.ErrorConnection")%>");
+		alert(login_ErrorConnection);		
 		document.location.href="<%=sUrlLoginComplete%>";
 	</script>
 	<%	
@@ -160,12 +164,9 @@
 		oOperationsCPass.logout();
 
 		if (sRespValue.equals("-1")){
-			%>
-			<script type="text/javascript">
-				alert("<%=Tran_shco_login_box.getProperty("login.NoDataM")%>");
-				//document.location.href="<%=sUrlLoginComplete%>";
-			</script>
-			<%
+			%><script type="text/javascript">alert(login_NoDataM);
+			document.location.href="<%=sUrlLoginComplete%>";
+			</script><%
 		}
 		else if(sRespValue.substring(0,2).equals("OK")){
 			%>
